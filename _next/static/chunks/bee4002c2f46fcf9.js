(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(t,e,i)=>{e.exports=t.r(76562)},66027,17010,t=>{"use strict";t.s(["useQuery",()=>ti],66027);var e,i,s,a,r,n,o,l,h,c,u,d,p,f,_,v,m,w,g,b,y,S,R,T,M=t.i(39946),O=t.i(70292),C=t.i(62351),P=t.i(37696),k=t.i(88245),I=t.i(75555),E=t.i(40143),A=t.i(86491),D=t.i(15823),x=t.i(93803),U=t.i(19273),W=t.i(80166),Q=(e=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,r=new WeakMap,n=new WeakMap,o=new WeakMap,l=new WeakMap,h=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,_=new WeakMap,v=new WeakSet,m=new WeakSet,w=new WeakSet,g=new WeakSet,b=new WeakSet,y=new WeakSet,S=new WeakSet,R=new WeakSet,T=new WeakSet,class extends D.Subscribable{bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&((0,M._)(this,i).addObserver(this),L((0,M._)(this,i),this.options)?(0,P._)(this,v,F).call(this):this.updateResult(),(0,P._)(this,b,H).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return j((0,M._)(this,i),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return j((0,M._)(this,i),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,(0,P._)(this,y,K).call(this),(0,P._)(this,S,N).call(this),(0,M._)(this,i).removeObserver(this)}setOptions(t){let s=this.options,a=(0,M._)(this,i);if(this.options=(0,M._)(this,e).defaultQueryOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,U.resolveEnabled)(this.options.enabled,(0,M._)(this,i)))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");(0,P._)(this,R,z).call(this),(0,M._)(this,i).setOptions(this.options),s._defaulted&&!(0,U.shallowEqualObjects)(this.options,s)&&(0,M._)(this,e).getQueryCache().notify({type:"observerOptionsUpdated",query:(0,M._)(this,i),observer:this});let r=this.hasListeners();r&&q((0,M._)(this,i),a,this.options,s)&&(0,P._)(this,v,F).call(this),this.updateResult(),r&&((0,M._)(this,i)!==a||(0,U.resolveEnabled)(this.options.enabled,(0,M._)(this,i))!==(0,U.resolveEnabled)(s.enabled,(0,M._)(this,i))||(0,U.resolveStaleTime)(this.options.staleTime,(0,M._)(this,i))!==(0,U.resolveStaleTime)(s.staleTime,(0,M._)(this,i)))&&(0,P._)(this,m,Y).call(this);let n=(0,P._)(this,w,G).call(this);r&&((0,M._)(this,i)!==a||(0,U.resolveEnabled)(this.options.enabled,(0,M._)(this,i))!==(0,U.resolveEnabled)(s.enabled,(0,M._)(this,i))||n!==(0,M._)(this,f))&&(0,P._)(this,g,B).call(this,n)}getOptimisticResult(t){var s,o;let l=(0,M._)(this,e).getQueryCache().build((0,M._)(this,e),t),h=this.createResult(l,t);return s=this,o=h,(0,U.shallowEqualObjects)(s.getCurrentResult(),o)||((0,C._)(this,a,h),(0,C._)(this,n,this.options),(0,C._)(this,r,(0,M._)(this,i).state)),h}getCurrentResult(){return(0,M._)(this,a)}trackResult(t,e){return new Proxy(t,{get:(t,i)=>(this.trackProp(i),null==e||e(i),"promise"!==i||this.options.experimental_prefetchInRender||"pending"!==(0,M._)(this,o).status||(0,M._)(this,o).reject(Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(t,i))})}trackProp(t){(0,M._)(this,_).add(t)}getCurrentQuery(){return(0,M._)(this,i)}refetch(){let{...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetch({...t})}fetchOptimistic(t){let i=(0,M._)(this,e).defaultQueryOptions(t),s=(0,M._)(this,e).getQueryCache().build((0,M._)(this,e),i);return s.fetch().then(()=>this.createResult(s,i))}fetch(t){var e;return(0,P._)(this,v,F).call(this,{...t,cancelRefetch:null==(e=t.cancelRefetch)||e}).then(()=>(this.updateResult(),(0,M._)(this,a)))}createResult(t,e){let d,p=(0,M._)(this,i),f=this.options,_=(0,M._)(this,a),v=(0,M._)(this,r),m=(0,M._)(this,n),w=t!==p?t.state:(0,M._)(this,s),{state:g}=t,b={...g},y=!1;if(e._optimisticResults){let i=this.hasListeners(),s=!i&&L(t,e),a=i&&q(t,p,e,f);(s||a)&&(b={...b,...(0,A.fetchState)(g.data,t.options)}),"isRestoring"===e._optimisticResults&&(b.fetchStatus="idle")}let{error:S,errorUpdatedAt:R,status:T}=b;d=b.data;let O=!1;if(void 0!==e.placeholderData&&void 0===d&&"pending"===T){let t;if((null==_?void 0:_.isPlaceholderData)&&e.placeholderData===(null==m?void 0:m.placeholderData))t=_.data,O=!0;else{var P;t="function"==typeof e.placeholderData?e.placeholderData(null==(P=(0,M._)(this,u))?void 0:P.state.data,(0,M._)(this,u)):e.placeholderData}void 0!==t&&(T="success",d=(0,U.replaceData)(null==_?void 0:_.data,t,e),y=!0)}if(e.select&&void 0!==d&&!O)if(_&&d===(null==v?void 0:v.data)&&e.select===(0,M._)(this,h))d=(0,M._)(this,c);else try{(0,C._)(this,h,e.select),d=e.select(d),d=(0,U.replaceData)(null==_?void 0:_.data,d,e),(0,C._)(this,c,d),(0,C._)(this,l,null)}catch(t){(0,C._)(this,l,t)}(0,M._)(this,l)&&(S=(0,M._)(this,l),d=(0,M._)(this,c),R=Date.now(),T="error");let k="fetching"===b.fetchStatus,I="pending"===T,E="error"===T,D=I&&k,W=void 0!==d,Q={status:T,fetchStatus:b.fetchStatus,isPending:I,isSuccess:"success"===T,isError:E,isInitialLoading:D,isLoading:D,data:d,dataUpdatedAt:b.dataUpdatedAt,error:S,errorUpdatedAt:R,failureCount:b.fetchFailureCount,failureReason:b.fetchFailureReason,errorUpdateCount:b.errorUpdateCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>w.dataUpdateCount||b.errorUpdateCount>w.errorUpdateCount,isFetching:k,isRefetching:k&&!I,isLoadingError:E&&!W,isPaused:"paused"===b.fetchStatus,isPlaceholderData:y,isRefetchError:E&&W,isStale:J(t,e),refetch:this.refetch,promise:(0,M._)(this,o),isEnabled:!1!==(0,U.resolveEnabled)(e.enabled,t)};if(this.options.experimental_prefetchInRender){let e=t=>{"error"===Q.status?t.reject(Q.error):void 0!==Q.data&&t.resolve(Q.data)},i=()=>{e((0,C._)(this,o,Q.promise=(0,x.pendingThenable)()))},s=(0,M._)(this,o);switch(s.status){case"pending":t.queryHash===p.queryHash&&e(s);break;case"fulfilled":("error"===Q.status||Q.data!==s.value)&&i();break;case"rejected":("error"!==Q.status||Q.error!==s.reason)&&i()}}return Q}updateResult(){let t=(0,M._)(this,a),e=this.createResult((0,M._)(this,i),this.options);if((0,C._)(this,r,(0,M._)(this,i).state),(0,C._)(this,n,this.options),void 0!==(0,M._)(this,r).data&&(0,C._)(this,u,(0,M._)(this,i)),(0,U.shallowEqualObjects)(e,t))return;(0,C._)(this,a,e);let s=()=>{if(!t)return!0;let{notifyOnChangeProps:e}=this.options,i="function"==typeof e?e():e;if("all"===i||!i&&!(0,M._)(this,_).size)return!0;let s=new Set(null!=i?i:(0,M._)(this,_));return this.options.throwOnError&&s.add("error"),Object.keys((0,M._)(this,a)).some(e=>(0,M._)(this,a)[e]!==t[e]&&s.has(e))};(0,P._)(this,T,V).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&(0,P._)(this,b,H).call(this)}constructor(t,M){super(),(0,k._)(this,v),(0,k._)(this,m),(0,k._)(this,w),(0,k._)(this,g),(0,k._)(this,b),(0,k._)(this,y),(0,k._)(this,S),(0,k._)(this,R),(0,k._)(this,T),(0,O._)(this,e,{writable:!0,value:void 0}),(0,O._)(this,i,{writable:!0,value:void 0}),(0,O._)(this,s,{writable:!0,value:void 0}),(0,O._)(this,a,{writable:!0,value:void 0}),(0,O._)(this,r,{writable:!0,value:void 0}),(0,O._)(this,n,{writable:!0,value:void 0}),(0,O._)(this,o,{writable:!0,value:void 0}),(0,O._)(this,l,{writable:!0,value:void 0}),(0,O._)(this,h,{writable:!0,value:void 0}),(0,O._)(this,c,{writable:!0,value:void 0}),(0,O._)(this,u,{writable:!0,value:void 0}),(0,O._)(this,d,{writable:!0,value:void 0}),(0,O._)(this,p,{writable:!0,value:void 0}),(0,O._)(this,f,{writable:!0,value:void 0}),(0,O._)(this,_,{writable:!0,value:new Set}),this.options=M,(0,C._)(this,e,t),(0,C._)(this,l,null),(0,C._)(this,o,(0,x.pendingThenable)()),this.bindMethods(),this.setOptions(M)}});function L(t,e){return!1!==(0,U.resolveEnabled)(e.enabled,t)&&void 0===t.state.data&&("error"!==t.state.status||!1!==e.retryOnMount)||void 0!==t.state.data&&j(t,e,e.refetchOnMount)}function j(t,e,i){if(!1!==(0,U.resolveEnabled)(e.enabled,t)&&"static"!==(0,U.resolveStaleTime)(e.staleTime,t)){let s="function"==typeof i?i(t):i;return"always"===s||!1!==s&&J(t,e)}return!1}function q(t,e,i,s){return(t!==e||!1===(0,U.resolveEnabled)(s.enabled,t))&&(!i.suspense||"error"!==t.state.status)&&J(t,i)}function J(t,e){return!1!==(0,U.resolveEnabled)(e.enabled,t)&&t.isStaleByTime((0,U.resolveStaleTime)(e.staleTime,t))}function F(t){(0,P._)(this,R,z).call(this);let e=(0,M._)(this,i).fetch(this.options,t);return(null==t?void 0:t.throwOnError)||(e=e.catch(U.noop)),e}function Y(){(0,P._)(this,y,K).call(this);let t=(0,U.resolveStaleTime)(this.options.staleTime,(0,M._)(this,i));if(U.isServer||(0,M._)(this,a).isStale||!(0,U.isValidTimeout)(t))return;let e=(0,U.timeUntilStale)((0,M._)(this,a).dataUpdatedAt,t);(0,C._)(this,d,W.timeoutManager.setTimeout(()=>{(0,M._)(this,a).isStale||this.updateResult()},e+1))}function G(){var t;return null!=(t="function"==typeof this.options.refetchInterval?this.options.refetchInterval((0,M._)(this,i)):this.options.refetchInterval)&&t}function B(t){(0,P._)(this,S,N).call(this),(0,C._)(this,f,t),!U.isServer&&!1!==(0,U.resolveEnabled)(this.options.enabled,(0,M._)(this,i))&&(0,U.isValidTimeout)((0,M._)(this,f))&&0!==(0,M._)(this,f)&&(0,C._)(this,p,W.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||I.focusManager.isFocused())&&(0,P._)(this,v,F).call(this)},(0,M._)(this,f)))}function H(){(0,P._)(this,m,Y).call(this),(0,P._)(this,g,B).call(this,(0,P._)(this,w,G).call(this))}function K(){(0,M._)(this,d)&&(W.timeoutManager.clearTimeout((0,M._)(this,d)),(0,C._)(this,d,void 0))}function N(){(0,M._)(this,p)&&(W.timeoutManager.clearInterval((0,M._)(this,p)),(0,C._)(this,p,void 0))}function z(){let t=(0,M._)(this,e).getQueryCache().build((0,M._)(this,e),this.options);if(t===(0,M._)(this,i))return;let a=(0,M._)(this,i);(0,C._)(this,i,t),(0,C._)(this,s,t.state),this.hasListeners()&&(null==a||a.removeObserver(this),t.addObserver(this))}function V(t){E.notifyManager.batch(()=>{t.listeners&&this.listeners.forEach(t=>{t((0,M._)(this,a))}),(0,M._)(this,e).getQueryCache().notify({query:(0,M._)(this,i),type:"observerResultsUpdated"})})}t.i(47167);var Z=t.i(71645),X=t.i(12598);t.i(43476);var $=Z.createContext(function(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}()),tt=Z.createContext(!1);tt.Provider;var te=(t,e,i)=>e.fetchOptimistic(t).catch(()=>{i.clearReset()});function ti(t,e){return function(t,e,i){var s,a,r,n,o;let l=Z.useContext(tt),h=Z.useContext($),c=(0,X.useQueryClient)(i),u=c.defaultQueryOptions(t);if(null==(a=c.getDefaultOptions().queries)||null==(s=a._experimental_beforeQuery)||s.call(a,u),u._optimisticResults=l?"isRestoring":"optimistic",u.suspense){let t=t=>"static"===t?t:Math.max(null!=t?t:1e3,1e3),e=u.staleTime;u.staleTime="function"==typeof e?function(){for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return t(e(...s))}:t(e),"number"==typeof u.gcTime&&(u.gcTime=Math.max(u.gcTime,1e3))}(u.suspense||u.throwOnError||u.experimental_prefetchInRender)&&!h.isReset()&&(u.retryOnMount=!1),Z.useEffect(()=>{h.clearReset()},[h]);let d=!c.getQueryCache().get(u.queryHash),[p]=Z.useState(()=>new e(c,u)),f=p.getOptimisticResult(u),_=!l&&!1!==t.subscribed;if(Z.useSyncExternalStore(Z.useCallback(t=>{let e=_?p.subscribe(E.notifyManager.batchCalls(t)):U.noop;return p.updateResult(),e},[p,_]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),Z.useEffect(()=>{p.setOptions(u)},[u,p]),(null==u?void 0:u.suspense)&&f.isPending)throw te(u,p,h);if((t=>{let{result:e,errorResetBoundary:i,throwOnError:s,query:a,suspense:r}=t;return e.isError&&!i.isReset()&&!e.isFetching&&a&&(r&&void 0===e.data||(0,U.shouldThrowError)(s,[e.error,a]))})({result:f,errorResetBoundary:h,throwOnError:u.throwOnError,query:c.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw f.error;if(null==(n=c.getDefaultOptions().queries)||null==(r=n._experimental_afterQuery)||r.call(n,u,f),u.experimental_prefetchInRender&&!U.isServer&&f.isLoading&&f.isFetching&&!l){let t=d?te(u,p,h):null==(o=c.getQueryCache().get(u.queryHash))?void 0:o.promise;null==t||t.catch(U.noop).finally(()=>{p.updateResult()})}return u.notifyOnChangeProps?f:p.trackResult(f)}(t,Q,e)}t.s(["getQuoteData",()=>tp,"itadSearchByTitle",()=>tc],17010);let ts=["https://cors-anywhere.herokuapp.com/","https://api.codetabs.com/v1/proxy/?quest=","https://corsproxy.io/?",""],ta="https://api.isthereanydeal.com",tr="c0976eafdab986bfcb33938af615368ae9eefa4f";function tn(t){let e={"018d937f-2a29-7310-9c92-389377742acf":"7 Days to Die",default:"Sample Game"},i=e[t]||e.default,s=Math.floor(5e3*Math.random())+1e3;return{data:{[t]:{title:i,list:[{id:"61",name:"Steam",priceJPY:s,availability:"available",discountPercent:Math.floor(50*Math.random()),regularPriceJPY:Math.floor(1.2*s),url:"https://store.steampowered.com/app/".concat(Math.floor(1e5*Math.random()),"/"),timestamp:new Date().toISOString(),isOnSale:Math.random()>.5},{id:"16",name:"Epic Games Store",priceJPY:Math.floor(1.1*s),availability:"available",discountPercent:Math.floor(30*Math.random()),regularPriceJPY:Math.floor(1.3*s),url:"https://www.epicgames.com/store/p/".concat(Math.random().toString(36).substr(2,9)),timestamp:new Date().toISOString(),isOnSale:Math.random()>.5},{id:"35",name:"GOG",priceJPY:Math.floor(.95*s),availability:"available",discountPercent:Math.floor(40*Math.random()),regularPriceJPY:Math.floor(1.15*s),url:"https://www.gog.com/game/".concat(Math.random().toString(36).substr(2,9)),timestamp:new Date().toISOString(),isOnSale:Math.random()>.5}],summary:{allTimeLow:{priceJPY:Math.floor(.5*s),shopName:"Steam",timestamp:"2023-12-25T00:00:00Z"}}}}}}console.log("[ITAD Client] API_KEY status:","set"),console.log("[ITAD Client] Using REAL API integration with CORS proxy");let to=[61,16,35,37,48,6,36];async function tl(t){return new Promise(e=>setTimeout(e,t))}async function th(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{retries:i=2,retryDelayMs:s=600,label:a="itad",...r}=e,n=new AbortController,o=setTimeout(()=>n.abort(),2e4),l=new URL("string"==typeof t?t:t.toString());"GET"===r.method&&!l.searchParams.has("key")&&tr&&l.searchParams.set("key",tr);for(let t=0;t<ts.length;t++){let e=ts[t],i=e?e+encodeURIComponent(l.toString()):l.toString();console.log("[ITAD ".concat(a,"] Trying proxy ").concat(t+1,"/").concat(ts.length,": ").concat(e||"direct"));try{let e=await fetch(i,{...r,signal:n.signal});if(e.ok)return console.log("[ITAD ".concat(a,"] Success with proxy ").concat(t+1)),e;console.warn("[ITAD ".concat(a,"] Proxy ").concat(t+1," failed: ").concat(e.status," ").concat(e.statusText))}catch(e){console.warn("[ITAD ".concat(a,"] Proxy ").concat(t+1," error:"),e)}}let h=Error("All CORS proxies failed for ".concat(a));if(i>0)return console.warn("[ITAD ".concat(a,"] All proxies failed -> retrying... (").concat(i," left)")),await tl(s),clearTimeout(o),th(t,{...r,retries:i-1,retryDelayMs:2*s,label:a});throw clearTimeout(o),h}async function tc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,i=new URL("".concat(ta,"/games/search/v1"));i.searchParams.set("title",t),i.searchParams.set("results",String(e));let s=await th(i,{method:"GET",label:"search"}),a=await s.json();return Array.isArray(a)?a:[]}async function tu(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"JP",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:to,s=new URL("".concat(ta,"/games/prices/v3")),a=new URLSearchParams;return a.set("country",e),a.set("shops",i.join(",")),a.set("deals","false"),a.set("ids",t.join(",")),a.set("key",tr),(await th(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a.toString(),label:"prices-v3"})).json()}async function td(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"JP",i=new URL("".concat(ta,"/games/overview/v2")),s=new URLSearchParams;return s.set("country",e),s.set("ids",t.join(",")),s.set("key",tr),(await th(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString(),label:"overview-v2"})).json()}async function tp(t){console.log("[ITAD Client] Attempting to fetch real data via CORS proxy for:",t);try{var e,i,s,a,r;let n=await tu([t]);console.log("[ITAD Client] Prices data received:",n);let o=await td([t]);console.log("[ITAD Client] Overview data received:",o);let l=null==n||null==(e=n.data)?void 0:e[t],h=null==o||null==(i=o.data)?void 0:i[t];if(!l||!l.list||0===l.list.length)return console.warn("[ITAD Client] No price data found in API response, using mock data"),console.log("[ITAD Client] API Response structure:",{pricesData:n,gameInfo:l}),tn(t);console.log("[ITAD Client] Successfully processing real API data");let c=(l.list||[]).map(t=>{var e,i,s,a,r;return{id:(null==(i=t.shop)||null==(e=i.id)?void 0:e.toString())||Math.random().toString(),name:(null==(s=t.shop)?void 0:s.name)||"Unknown Store",priceJPY:Math.round(((null==(a=t.price)?void 0:a.amountInt)||(null==(r=t.price)?void 0:r.amount)||0)/100),regularPriceJPY:t.regular?Math.round((t.regular.amountInt||t.regular.amount||0)/100):null,discountPercent:t.cut||0,isOnSale:(t.cut||0)>0,url:t.url||"#",availability:"available",timestamp:t.timestamp||new Date().toISOString()}}),u=(null==h?void 0:h.lowest)?{priceJPY:Math.round(((null==(s=h.lowest.price)?void 0:s.amountInt)||(null==(a=h.lowest.price)?void 0:a.amount)||0)/100),shopName:(null==(r=h.lowest.shop)?void 0:r.name)||"Unknown",timestamp:h.lowest.added||new Date().toISOString()}:null,d={data:{[t]:{title:l.title||(null==h?void 0:h.title)||"Unknown Game",list:c,summary:{allTimeLow:u}}}};return console.log("[ITAD Client] Real API data successfully processed:",d),d}catch(e){return console.error("[ITAD Client] API call failed, falling back to mock data:",e),tn(t)}}}]);