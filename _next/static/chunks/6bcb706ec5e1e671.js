(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(t,e,s)=>{e.exports=t.r(76562)},66027,17010,t=>{"use strict";t.s(["useQuery",()=>ts],66027);var e,s,i,a,r,n,o,l,h,u,c,d,p,_,f,v,b,m,w,g,y,S,M,R,O=t.i(39946),T=t.i(70292),k=t.i(62351),C=t.i(37696),E=t.i(88245),P=t.i(75555),W=t.i(40143),D=t.i(86491),I=t.i(15823),x=t.i(93803),U=t.i(19273),Q=t.i(80166),A=(e=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,r=new WeakMap,n=new WeakMap,o=new WeakMap,l=new WeakMap,h=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,p=new WeakMap,_=new WeakMap,f=new WeakMap,v=new WeakSet,b=new WeakSet,m=new WeakSet,w=new WeakSet,g=new WeakSet,y=new WeakSet,S=new WeakSet,M=new WeakSet,R=new WeakSet,class extends I.Subscribable{bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&((0,O._)(this,s).addObserver(this),q((0,O._)(this,s),this.options)?(0,C._)(this,v,Y).call(this):this.updateResult(),(0,C._)(this,g,G).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return F((0,O._)(this,s),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return F((0,O._)(this,s),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,(0,C._)(this,y,K).call(this),(0,C._)(this,S,z).call(this),(0,O._)(this,s).removeObserver(this)}setOptions(t){let i=this.options,a=(0,O._)(this,s);if(this.options=(0,O._)(this,e).defaultQueryOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,U.resolveEnabled)(this.options.enabled,(0,O._)(this,s)))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");(0,C._)(this,M,V).call(this),(0,O._)(this,s).setOptions(this.options),i._defaulted&&!(0,U.shallowEqualObjects)(this.options,i)&&(0,O._)(this,e).getQueryCache().notify({type:"observerOptionsUpdated",query:(0,O._)(this,s),observer:this});let r=this.hasListeners();r&&L((0,O._)(this,s),a,this.options,i)&&(0,C._)(this,v,Y).call(this),this.updateResult(),r&&((0,O._)(this,s)!==a||(0,U.resolveEnabled)(this.options.enabled,(0,O._)(this,s))!==(0,U.resolveEnabled)(i.enabled,(0,O._)(this,s))||(0,U.resolveStaleTime)(this.options.staleTime,(0,O._)(this,s))!==(0,U.resolveStaleTime)(i.staleTime,(0,O._)(this,s)))&&(0,C._)(this,b,J).call(this);let n=(0,C._)(this,m,H).call(this);r&&((0,O._)(this,s)!==a||(0,U.resolveEnabled)(this.options.enabled,(0,O._)(this,s))!==(0,U.resolveEnabled)(i.enabled,(0,O._)(this,s))||n!==(0,O._)(this,_))&&(0,C._)(this,w,B).call(this,n)}getOptimisticResult(t){var i,o;let l=(0,O._)(this,e).getQueryCache().build((0,O._)(this,e),t),h=this.createResult(l,t);return i=this,o=h,(0,U.shallowEqualObjects)(i.getCurrentResult(),o)||((0,k._)(this,a,h),(0,k._)(this,n,this.options),(0,k._)(this,r,(0,O._)(this,s).state)),h}getCurrentResult(){return(0,O._)(this,a)}trackResult(t,e){return new Proxy(t,{get:(t,s)=>(this.trackProp(s),null==e||e(s),"promise"!==s||this.options.experimental_prefetchInRender||"pending"!==(0,O._)(this,o).status||(0,O._)(this,o).reject(Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(t,s))})}trackProp(t){(0,O._)(this,f).add(t)}getCurrentQuery(){return(0,O._)(this,s)}refetch(){let{...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetch({...t})}fetchOptimistic(t){let s=(0,O._)(this,e).defaultQueryOptions(t),i=(0,O._)(this,e).getQueryCache().build((0,O._)(this,e),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(t){var e;return(0,C._)(this,v,Y).call(this,{...t,cancelRefetch:null==(e=t.cancelRefetch)||e}).then(()=>(this.updateResult(),(0,O._)(this,a)))}createResult(t,e){let d,p=(0,O._)(this,s),_=this.options,f=(0,O._)(this,a),v=(0,O._)(this,r),b=(0,O._)(this,n),m=t!==p?t.state:(0,O._)(this,i),{state:w}=t,g={...w},y=!1;if(e._optimisticResults){let s=this.hasListeners(),i=!s&&q(t,e),a=s&&L(t,p,e,_);(i||a)&&(g={...g,...(0,D.fetchState)(w.data,t.options)}),"isRestoring"===e._optimisticResults&&(g.fetchStatus="idle")}let{error:S,errorUpdatedAt:M,status:R}=g;d=g.data;let T=!1;if(void 0!==e.placeholderData&&void 0===d&&"pending"===R){let t;if((null==f?void 0:f.isPlaceholderData)&&e.placeholderData===(null==b?void 0:b.placeholderData))t=f.data,T=!0;else{var C;t="function"==typeof e.placeholderData?e.placeholderData(null==(C=(0,O._)(this,c))?void 0:C.state.data,(0,O._)(this,c)):e.placeholderData}void 0!==t&&(R="success",d=(0,U.replaceData)(null==f?void 0:f.data,t,e),y=!0)}if(e.select&&void 0!==d&&!T)if(f&&d===(null==v?void 0:v.data)&&e.select===(0,O._)(this,h))d=(0,O._)(this,u);else try{(0,k._)(this,h,e.select),d=e.select(d),d=(0,U.replaceData)(null==f?void 0:f.data,d,e),(0,k._)(this,u,d),(0,k._)(this,l,null)}catch(t){(0,k._)(this,l,t)}(0,O._)(this,l)&&(S=(0,O._)(this,l),d=(0,O._)(this,u),M=Date.now(),R="error");let E="fetching"===g.fetchStatus,P="pending"===R,W="error"===R,I=P&&E,Q=void 0!==d,A={status:R,fetchStatus:g.fetchStatus,isPending:P,isSuccess:"success"===R,isError:W,isInitialLoading:I,isLoading:I,data:d,dataUpdatedAt:g.dataUpdatedAt,error:S,errorUpdatedAt:M,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>m.dataUpdateCount||g.errorUpdateCount>m.errorUpdateCount,isFetching:E,isRefetching:E&&!P,isLoadingError:W&&!Q,isPaused:"paused"===g.fetchStatus,isPlaceholderData:y,isRefetchError:W&&Q,isStale:j(t,e),refetch:this.refetch,promise:(0,O._)(this,o),isEnabled:!1!==(0,U.resolveEnabled)(e.enabled,t)};if(this.options.experimental_prefetchInRender){let e=t=>{"error"===A.status?t.reject(A.error):void 0!==A.data&&t.resolve(A.data)},s=()=>{e((0,k._)(this,o,A.promise=(0,x.pendingThenable)()))},i=(0,O._)(this,o);switch(i.status){case"pending":t.queryHash===p.queryHash&&e(i);break;case"fulfilled":("error"===A.status||A.data!==i.value)&&s();break;case"rejected":("error"!==A.status||A.error!==i.reason)&&s()}}return A}updateResult(){let t=(0,O._)(this,a),e=this.createResult((0,O._)(this,s),this.options);if((0,k._)(this,r,(0,O._)(this,s).state),(0,k._)(this,n,this.options),void 0!==(0,O._)(this,r).data&&(0,k._)(this,c,(0,O._)(this,s)),(0,U.shallowEqualObjects)(e,t))return;(0,k._)(this,a,e);let i=()=>{if(!t)return!0;let{notifyOnChangeProps:e}=this.options,s="function"==typeof e?e():e;if("all"===s||!s&&!(0,O._)(this,f).size)return!0;let i=new Set(null!=s?s:(0,O._)(this,f));return this.options.throwOnError&&i.add("error"),Object.keys((0,O._)(this,a)).some(e=>(0,O._)(this,a)[e]!==t[e]&&i.has(e))};(0,C._)(this,R,N).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&(0,C._)(this,g,G).call(this)}constructor(t,O){super(),(0,E._)(this,v),(0,E._)(this,b),(0,E._)(this,m),(0,E._)(this,w),(0,E._)(this,g),(0,E._)(this,y),(0,E._)(this,S),(0,E._)(this,M),(0,E._)(this,R),(0,T._)(this,e,{writable:!0,value:void 0}),(0,T._)(this,s,{writable:!0,value:void 0}),(0,T._)(this,i,{writable:!0,value:void 0}),(0,T._)(this,a,{writable:!0,value:void 0}),(0,T._)(this,r,{writable:!0,value:void 0}),(0,T._)(this,n,{writable:!0,value:void 0}),(0,T._)(this,o,{writable:!0,value:void 0}),(0,T._)(this,l,{writable:!0,value:void 0}),(0,T._)(this,h,{writable:!0,value:void 0}),(0,T._)(this,u,{writable:!0,value:void 0}),(0,T._)(this,c,{writable:!0,value:void 0}),(0,T._)(this,d,{writable:!0,value:void 0}),(0,T._)(this,p,{writable:!0,value:void 0}),(0,T._)(this,_,{writable:!0,value:void 0}),(0,T._)(this,f,{writable:!0,value:new Set}),this.options=O,(0,k._)(this,e,t),(0,k._)(this,l,null),(0,k._)(this,o,(0,x.pendingThenable)()),this.bindMethods(),this.setOptions(O)}});function q(t,e){return!1!==(0,U.resolveEnabled)(e.enabled,t)&&void 0===t.state.data&&("error"!==t.state.status||!1!==e.retryOnMount)||void 0!==t.state.data&&F(t,e,e.refetchOnMount)}function F(t,e,s){if(!1!==(0,U.resolveEnabled)(e.enabled,t)&&"static"!==(0,U.resolveStaleTime)(e.staleTime,t)){let i="function"==typeof s?s(t):s;return"always"===i||!1!==i&&j(t,e)}return!1}function L(t,e,s,i){return(t!==e||!1===(0,U.resolveEnabled)(i.enabled,t))&&(!s.suspense||"error"!==t.state.status)&&j(t,s)}function j(t,e){return!1!==(0,U.resolveEnabled)(e.enabled,t)&&t.isStaleByTime((0,U.resolveStaleTime)(e.staleTime,t))}function Y(t){(0,C._)(this,M,V).call(this);let e=(0,O._)(this,s).fetch(this.options,t);return(null==t?void 0:t.throwOnError)||(e=e.catch(U.noop)),e}function J(){(0,C._)(this,y,K).call(this);let t=(0,U.resolveStaleTime)(this.options.staleTime,(0,O._)(this,s));if(U.isServer||(0,O._)(this,a).isStale||!(0,U.isValidTimeout)(t))return;let e=(0,U.timeUntilStale)((0,O._)(this,a).dataUpdatedAt,t);(0,k._)(this,d,Q.timeoutManager.setTimeout(()=>{(0,O._)(this,a).isStale||this.updateResult()},e+1))}function H(){var t;return null!=(t="function"==typeof this.options.refetchInterval?this.options.refetchInterval((0,O._)(this,s)):this.options.refetchInterval)&&t}function B(t){(0,C._)(this,S,z).call(this),(0,k._)(this,_,t),!U.isServer&&!1!==(0,U.resolveEnabled)(this.options.enabled,(0,O._)(this,s))&&(0,U.isValidTimeout)((0,O._)(this,_))&&0!==(0,O._)(this,_)&&(0,k._)(this,p,Q.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||P.focusManager.isFocused())&&(0,C._)(this,v,Y).call(this)},(0,O._)(this,_)))}function G(){(0,C._)(this,b,J).call(this),(0,C._)(this,w,B).call(this,(0,C._)(this,m,H).call(this))}function K(){(0,O._)(this,d)&&(Q.timeoutManager.clearTimeout((0,O._)(this,d)),(0,k._)(this,d,void 0))}function z(){(0,O._)(this,p)&&(Q.timeoutManager.clearInterval((0,O._)(this,p)),(0,k._)(this,p,void 0))}function V(){let t=(0,O._)(this,e).getQueryCache().build((0,O._)(this,e),this.options);if(t===(0,O._)(this,s))return;let a=(0,O._)(this,s);(0,k._)(this,s,t),(0,k._)(this,i,t.state),this.hasListeners()&&(null==a||a.removeObserver(this),t.addObserver(this))}function N(t){W.notifyManager.batch(()=>{t.listeners&&this.listeners.forEach(t=>{t((0,O._)(this,a))}),(0,O._)(this,e).getQueryCache().notify({query:(0,O._)(this,s),type:"observerResultsUpdated"})})}t.i(47167);var Z=t.i(71645),X=t.i(12598);t.i(43476);var $=Z.createContext(function(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}()),tt=Z.createContext(!1);tt.Provider;var te=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function ts(t,e){return function(t,e,s){var i,a,r,n,o;let l=Z.useContext(tt),h=Z.useContext($),u=(0,X.useQueryClient)(s),c=u.defaultQueryOptions(t);if(null==(a=u.getDefaultOptions().queries)||null==(i=a._experimental_beforeQuery)||i.call(a,c),c._optimisticResults=l?"isRestoring":"optimistic",c.suspense){let t=t=>"static"===t?t:Math.max(null!=t?t:1e3,1e3),e=c.staleTime;c.staleTime="function"==typeof e?function(){for(var s=arguments.length,i=Array(s),a=0;a<s;a++)i[a]=arguments[a];return t(e(...i))}:t(e),"number"==typeof c.gcTime&&(c.gcTime=Math.max(c.gcTime,1e3))}(c.suspense||c.throwOnError||c.experimental_prefetchInRender)&&!h.isReset()&&(c.retryOnMount=!1),Z.useEffect(()=>{h.clearReset()},[h]);let d=!u.getQueryCache().get(c.queryHash),[p]=Z.useState(()=>new e(u,c)),_=p.getOptimisticResult(c),f=!l&&!1!==t.subscribed;if(Z.useSyncExternalStore(Z.useCallback(t=>{let e=f?p.subscribe(W.notifyManager.batchCalls(t)):U.noop;return p.updateResult(),e},[p,f]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),Z.useEffect(()=>{p.setOptions(c)},[c,p]),(null==c?void 0:c.suspense)&&_.isPending)throw te(c,p,h);if((t=>{let{result:e,errorResetBoundary:s,throwOnError:i,query:a,suspense:r}=t;return e.isError&&!s.isReset()&&!e.isFetching&&a&&(r&&void 0===e.data||(0,U.shouldThrowError)(i,[e.error,a]))})({result:_,errorResetBoundary:h,throwOnError:c.throwOnError,query:u.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw _.error;if(null==(n=u.getDefaultOptions().queries)||null==(r=n._experimental_afterQuery)||r.call(n,c,_),c.experimental_prefetchInRender&&!U.isServer&&_.isLoading&&_.isFetching&&!l){let t=d?te(c,p,h):null==(o=u.getQueryCache().get(c.queryHash))?void 0:o.promise;null==t||t.catch(U.noop).finally(()=>{p.updateResult()})}return c.notifyOnChangeProps?_:p.trackResult(_)}(t,A,e)}t.s(["getQuoteData",()=>to,"itadSearchByTitle",()=>tn],17010);let ti="c0976eafdab986bfcb33938af615368ae9eefa4f";async function ta(t){return new Promise(e=>setTimeout(e,t))}async function tr(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{retries:s=2,retryDelayMs:i=600,label:a="itad",...r}=e,n=new AbortController,o=setTimeout(()=>n.abort(),2e4),l=new URL("string"==typeof t?t:t.toString());!l.searchParams.has("key")&&ti&&l.searchParams.set("key",ti),t=l;try{let e=await fetch(t,{...r,signal:n.signal});if(e.ok)return e;if((429===e.status||e.status>=500)&&s>0)return console.warn("[ITAD ".concat(a,"] ").concat(e.status," ").concat(e.statusText," -> retrying... (").concat(s," left)")),await ta(i),tr(t,{...r,retries:s-1,retryDelayMs:2*i,label:a});let o=await e.text().catch(()=>"");throw Error("HTTP ".concat(e.status,": ").concat(e.statusText," ").concat(o?"| body=".concat(o.slice(0,256)):""))}catch(e){if(s>0)return console.warn("[ITAD ".concat(a,"] error: ").concat(e instanceof Error?e.message:String(e)," -> retrying... (").concat(s," left)")),await ta(i),tr(t,{...r,retries:s-1,retryDelayMs:2*i,label:a});throw e}finally{clearTimeout(o)}}async function tn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,s=new URL("".concat("https://api.isthereanydeal.com","/games/search/v1"));s.searchParams.set("title",t),s.searchParams.set("results",String(e));let i=await tr(s,{method:"GET",label:"search"}),a=await i.json();return Array.isArray(a)?a:[]}async function to(t){try{return console.warn("[ITAD Client] Using mock data due to CORS restrictions in browser environment"),function(t){let e={"018d937f-2a29-7310-9c92-389377742acf":"7 Days to Die",default:"Sample Game"},s=e[t]||e.default,i=Math.floor(5e3*Math.random())+1e3;return{data:{[t]:{title:s,list:[{id:"61",name:"Steam",priceJPY:i,availability:"available",discountPercent:Math.floor(50*Math.random()),regularPriceJPY:Math.floor(1.2*i),url:"https://store.steampowered.com/app/".concat(Math.floor(1e5*Math.random()),"/"),timestamp:new Date().toISOString(),isOnSale:Math.random()>.5},{id:"16",name:"Epic Games Store",priceJPY:Math.floor(1.1*i),availability:"available",discountPercent:Math.floor(30*Math.random()),regularPriceJPY:Math.floor(1.3*i),url:"https://www.epicgames.com/store/p/".concat(Math.random().toString(36).substr(2,9)),timestamp:new Date().toISOString(),isOnSale:Math.random()>.5},{id:"35",name:"GOG",priceJPY:Math.floor(.95*i),availability:"available",discountPercent:Math.floor(40*Math.random()),regularPriceJPY:Math.floor(1.15*i),url:"https://www.gog.com/game/".concat(Math.random().toString(36).substr(2,9)),timestamp:new Date().toISOString(),isOnSale:Math.random()>.5}],summary:{allTimeLow:{priceJPY:Math.floor(.5*i),shopName:"Steam",timestamp:"2023-12-25T00:00:00Z"}}}}}}(t)}catch(t){throw console.error("[ITAD Client] Mock data generation failed:",t),t}}console.log("[ITAD Client] API_KEY status:","set")}]);