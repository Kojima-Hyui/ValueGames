(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},66027,17010,e=>{"use strict";e.s(["useQuery",()=>ei],66027);var t,s,i,r,a,n,l,o,u,c,h,d,p,m,v,f,b,_,y,g,w,x,S,j,k=e.i(39946),T=e.i(70292),R=e.i(62351),P=e.i(37696),O=e.i(88245),N=e.i(75555),C=e.i(40143),E=e.i(86491),I=e.i(15823),M=e.i(93803),L=e.i(19273),W=e.i(80166),A=(t=new WeakMap,s=new WeakMap,i=new WeakMap,r=new WeakMap,a=new WeakMap,n=new WeakMap,l=new WeakMap,o=new WeakMap,u=new WeakMap,c=new WeakMap,h=new WeakMap,d=new WeakMap,p=new WeakMap,m=new WeakMap,v=new WeakMap,f=new WeakSet,b=new WeakSet,_=new WeakSet,y=new WeakSet,g=new WeakSet,w=new WeakSet,x=new WeakSet,S=new WeakSet,j=new WeakSet,class extends I.Subscribable{bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&((0,k._)(this,s).addObserver(this),U((0,k._)(this,s),this.options)?(0,P._)(this,f,J).call(this):this.updateResult(),(0,P._)(this,g,H).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return D((0,k._)(this,s),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return D((0,k._)(this,s),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,(0,P._)(this,w,K).call(this),(0,P._)(this,x,G).call(this),(0,k._)(this,s).removeObserver(this)}setOptions(e){let i=this.options,r=(0,k._)(this,s);if(this.options=(0,k._)(this,t).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,L.resolveEnabled)(this.options.enabled,(0,k._)(this,s)))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");(0,P._)(this,S,z).call(this),(0,k._)(this,s).setOptions(this.options),i._defaulted&&!(0,L.shallowEqualObjects)(this.options,i)&&(0,k._)(this,t).getQueryCache().notify({type:"observerOptionsUpdated",query:(0,k._)(this,s),observer:this});let a=this.hasListeners();a&&Q((0,k._)(this,s),r,this.options,i)&&(0,P._)(this,f,J).call(this),this.updateResult(),a&&((0,k._)(this,s)!==r||(0,L.resolveEnabled)(this.options.enabled,(0,k._)(this,s))!==(0,L.resolveEnabled)(i.enabled,(0,k._)(this,s))||(0,L.resolveStaleTime)(this.options.staleTime,(0,k._)(this,s))!==(0,L.resolveStaleTime)(i.staleTime,(0,k._)(this,s)))&&(0,P._)(this,b,F).call(this);let n=(0,P._)(this,_,B).call(this);a&&((0,k._)(this,s)!==r||(0,L.resolveEnabled)(this.options.enabled,(0,k._)(this,s))!==(0,L.resolveEnabled)(i.enabled,(0,k._)(this,s))||n!==(0,k._)(this,m))&&(0,P._)(this,y,Y).call(this,n)}getOptimisticResult(e){var i,l;let o=(0,k._)(this,t).getQueryCache().build((0,k._)(this,t),e),u=this.createResult(o,e);return i=this,l=u,(0,L.shallowEqualObjects)(i.getCurrentResult(),l)||((0,R._)(this,r,u),(0,R._)(this,n,this.options),(0,R._)(this,a,(0,k._)(this,s).state)),u}getCurrentResult(){return(0,k._)(this,r)}trackResult(e,t){return new Proxy(e,{get:(e,s)=>(this.trackProp(s),null==t||t(s),"promise"!==s||this.options.experimental_prefetchInRender||"pending"!==(0,k._)(this,l).status||(0,k._)(this,l).reject(Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(e,s))})}trackProp(e){(0,k._)(this,v).add(e)}getCurrentQuery(){return(0,k._)(this,s)}refetch(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetch({...e})}fetchOptimistic(e){let s=(0,k._)(this,t).defaultQueryOptions(e),i=(0,k._)(this,t).getQueryCache().build((0,k._)(this,t),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(e){var t;return(0,P._)(this,f,J).call(this,{...e,cancelRefetch:null==(t=e.cancelRefetch)||t}).then(()=>(this.updateResult(),(0,k._)(this,r)))}createResult(e,t){let d,p=(0,k._)(this,s),m=this.options,v=(0,k._)(this,r),f=(0,k._)(this,a),b=(0,k._)(this,n),_=e!==p?e.state:(0,k._)(this,i),{state:y}=e,g={...y},w=!1;if(t._optimisticResults){let s=this.hasListeners(),i=!s&&U(e,t),r=s&&Q(e,p,t,m);(i||r)&&(g={...g,...(0,E.fetchState)(y.data,e.options)}),"isRestoring"===t._optimisticResults&&(g.fetchStatus="idle")}let{error:x,errorUpdatedAt:S,status:j}=g;d=g.data;let T=!1;if(void 0!==t.placeholderData&&void 0===d&&"pending"===j){let e;if((null==v?void 0:v.isPlaceholderData)&&t.placeholderData===(null==b?void 0:b.placeholderData))e=v.data,T=!0;else{var P;e="function"==typeof t.placeholderData?t.placeholderData(null==(P=(0,k._)(this,h))?void 0:P.state.data,(0,k._)(this,h)):t.placeholderData}void 0!==e&&(j="success",d=(0,L.replaceData)(null==v?void 0:v.data,e,t),w=!0)}if(t.select&&void 0!==d&&!T)if(v&&d===(null==f?void 0:f.data)&&t.select===(0,k._)(this,u))d=(0,k._)(this,c);else try{(0,R._)(this,u,t.select),d=t.select(d),d=(0,L.replaceData)(null==v?void 0:v.data,d,t),(0,R._)(this,c,d),(0,R._)(this,o,null)}catch(e){(0,R._)(this,o,e)}(0,k._)(this,o)&&(x=(0,k._)(this,o),d=(0,k._)(this,c),S=Date.now(),j="error");let O="fetching"===g.fetchStatus,N="pending"===j,C="error"===j,I=N&&O,W=void 0!==d,A={status:j,fetchStatus:g.fetchStatus,isPending:N,isSuccess:"success"===j,isError:C,isInitialLoading:I,isLoading:I,data:d,dataUpdatedAt:g.dataUpdatedAt,error:x,errorUpdatedAt:S,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>_.dataUpdateCount||g.errorUpdateCount>_.errorUpdateCount,isFetching:O,isRefetching:O&&!N,isLoadingError:C&&!W,isPaused:"paused"===g.fetchStatus,isPlaceholderData:w,isRefetchError:C&&W,isStale:q(e,t),refetch:this.refetch,promise:(0,k._)(this,l),isEnabled:!1!==(0,L.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===A.status?e.reject(A.error):void 0!==A.data&&e.resolve(A.data)},s=()=>{t((0,R._)(this,l,A.promise=(0,M.pendingThenable)()))},i=(0,k._)(this,l);switch(i.status){case"pending":e.queryHash===p.queryHash&&t(i);break;case"fulfilled":("error"===A.status||A.data!==i.value)&&s();break;case"rejected":("error"!==A.status||A.error!==i.reason)&&s()}}return A}updateResult(){let e=(0,k._)(this,r),t=this.createResult((0,k._)(this,s),this.options);if((0,R._)(this,a,(0,k._)(this,s).state),(0,R._)(this,n,this.options),void 0!==(0,k._)(this,a).data&&(0,R._)(this,h,(0,k._)(this,s)),(0,L.shallowEqualObjects)(t,e))return;(0,R._)(this,r,t);let i=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,s="function"==typeof t?t():t;if("all"===s||!s&&!(0,k._)(this,v).size)return!0;let i=new Set(null!=s?s:(0,k._)(this,v));return this.options.throwOnError&&i.add("error"),Object.keys((0,k._)(this,r)).some(t=>(0,k._)(this,r)[t]!==e[t]&&i.has(t))};(0,P._)(this,j,V).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&(0,P._)(this,g,H).call(this)}constructor(e,k){super(),(0,O._)(this,f),(0,O._)(this,b),(0,O._)(this,_),(0,O._)(this,y),(0,O._)(this,g),(0,O._)(this,w),(0,O._)(this,x),(0,O._)(this,S),(0,O._)(this,j),(0,T._)(this,t,{writable:!0,value:void 0}),(0,T._)(this,s,{writable:!0,value:void 0}),(0,T._)(this,i,{writable:!0,value:void 0}),(0,T._)(this,r,{writable:!0,value:void 0}),(0,T._)(this,a,{writable:!0,value:void 0}),(0,T._)(this,n,{writable:!0,value:void 0}),(0,T._)(this,l,{writable:!0,value:void 0}),(0,T._)(this,o,{writable:!0,value:void 0}),(0,T._)(this,u,{writable:!0,value:void 0}),(0,T._)(this,c,{writable:!0,value:void 0}),(0,T._)(this,h,{writable:!0,value:void 0}),(0,T._)(this,d,{writable:!0,value:void 0}),(0,T._)(this,p,{writable:!0,value:void 0}),(0,T._)(this,m,{writable:!0,value:void 0}),(0,T._)(this,v,{writable:!0,value:new Set}),this.options=k,(0,R._)(this,t,e),(0,R._)(this,o,null),(0,R._)(this,l,(0,M.pendingThenable)()),this.bindMethods(),this.setOptions(k)}});function U(e,t){return!1!==(0,L.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&D(e,t,t.refetchOnMount)}function D(e,t,s){if(!1!==(0,L.resolveEnabled)(t.enabled,e)&&"static"!==(0,L.resolveStaleTime)(t.staleTime,e)){let i="function"==typeof s?s(e):s;return"always"===i||!1!==i&&q(e,t)}return!1}function Q(e,t,s,i){return(e!==t||!1===(0,L.resolveEnabled)(i.enabled,e))&&(!s.suspense||"error"!==e.state.status)&&q(e,s)}function q(e,t){return!1!==(0,L.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,L.resolveStaleTime)(t.staleTime,e))}function J(e){(0,P._)(this,S,z).call(this);let t=(0,k._)(this,s).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(L.noop)),t}function F(){(0,P._)(this,w,K).call(this);let e=(0,L.resolveStaleTime)(this.options.staleTime,(0,k._)(this,s));if(L.isServer||(0,k._)(this,r).isStale||!(0,L.isValidTimeout)(e))return;let t=(0,L.timeUntilStale)((0,k._)(this,r).dataUpdatedAt,e);(0,R._)(this,d,W.timeoutManager.setTimeout(()=>{(0,k._)(this,r).isStale||this.updateResult()},t+1))}function B(){var e;return null!=(e="function"==typeof this.options.refetchInterval?this.options.refetchInterval((0,k._)(this,s)):this.options.refetchInterval)&&e}function Y(e){(0,P._)(this,x,G).call(this),(0,R._)(this,m,e),!L.isServer&&!1!==(0,L.resolveEnabled)(this.options.enabled,(0,k._)(this,s))&&(0,L.isValidTimeout)((0,k._)(this,m))&&0!==(0,k._)(this,m)&&(0,R._)(this,p,W.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||N.focusManager.isFocused())&&(0,P._)(this,f,J).call(this)},(0,k._)(this,m)))}function H(){(0,P._)(this,b,F).call(this),(0,P._)(this,y,Y).call(this,(0,P._)(this,_,B).call(this))}function K(){(0,k._)(this,d)&&(W.timeoutManager.clearTimeout((0,k._)(this,d)),(0,R._)(this,d,void 0))}function G(){(0,k._)(this,p)&&(W.timeoutManager.clearInterval((0,k._)(this,p)),(0,R._)(this,p,void 0))}function z(){let e=(0,k._)(this,t).getQueryCache().build((0,k._)(this,t),this.options);if(e===(0,k._)(this,s))return;let r=(0,k._)(this,s);(0,R._)(this,s,e),(0,R._)(this,i,e.state),this.hasListeners()&&(null==r||r.removeObserver(this),e.addObserver(this))}function V(e){C.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e((0,k._)(this,r))}),(0,k._)(this,t).getQueryCache().notify({query:(0,k._)(this,s),type:"observerResultsUpdated"})})}var X=e.i(47167),Z=e.i(71645),$=e.i(12598);e.i(43476);var ee=Z.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),et=Z.createContext(!1);et.Provider;var es=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function ei(e,t){return function(e,t,s){var i,r,a,n,l;let o=Z.useContext(et),u=Z.useContext(ee),c=(0,$.useQueryClient)(s),h=c.defaultQueryOptions(e);if(null==(r=c.getDefaultOptions().queries)||null==(i=r._experimental_beforeQuery)||i.call(r,h),h._optimisticResults=o?"isRestoring":"optimistic",h.suspense){let e=e=>"static"===e?e:Math.max(null!=e?e:1e3,1e3),t=h.staleTime;h.staleTime="function"==typeof t?function(){for(var s=arguments.length,i=Array(s),r=0;r<s;r++)i[r]=arguments[r];return e(t(...i))}:e(t),"number"==typeof h.gcTime&&(h.gcTime=Math.max(h.gcTime,1e3))}(h.suspense||h.throwOnError||h.experimental_prefetchInRender)&&!u.isReset()&&(h.retryOnMount=!1),Z.useEffect(()=>{u.clearReset()},[u]);let d=!c.getQueryCache().get(h.queryHash),[p]=Z.useState(()=>new t(c,h)),m=p.getOptimisticResult(h),v=!o&&!1!==e.subscribed;if(Z.useSyncExternalStore(Z.useCallback(e=>{let t=v?p.subscribe(C.notifyManager.batchCalls(e)):L.noop;return p.updateResult(),t},[p,v]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),Z.useEffect(()=>{p.setOptions(h)},[h,p]),(null==h?void 0:h.suspense)&&m.isPending)throw es(h,p,u);if((e=>{let{result:t,errorResetBoundary:s,throwOnError:i,query:r,suspense:a}=e;return t.isError&&!s.isReset()&&!t.isFetching&&r&&(a&&void 0===t.data||(0,L.shouldThrowError)(i,[t.error,r]))})({result:m,errorResetBoundary:u,throwOnError:h.throwOnError,query:c.getQueryCache().get(h.queryHash),suspense:h.suspense}))throw m.error;if(null==(n=c.getDefaultOptions().queries)||null==(a=n._experimental_afterQuery)||a.call(n,h,m),h.experimental_prefetchInRender&&!L.isServer&&m.isLoading&&m.isFetching&&!o){let e=d?es(h,p,u):null==(l=c.getQueryCache().get(h.queryHash))?void 0:l.promise;null==e||e.catch(L.noop).finally(()=>{p.updateResult()})}return h.notifyOnChangeProps?m:p.trackResult(m)}(e,A,t)}e.s(["getQuoteData",()=>ep,"itadSearchByTitle",()=>eu],17010);let er="https://api.isthereanydeal.com",ea=X.default.env.NEXT_PUBLIC_ITAD_API_KEY,en=[61,16,35,37,48,6,36];async function el(e){return new Promise(t=>setTimeout(t,e))}async function eo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ea)throw console.warn("[ITAD Client] API key not available in client environment"),Error("API key required for ITAD API access");let{retries:s=2,retryDelayMs:i=600,label:r="itad",...a}=t,n=new AbortController,l=setTimeout(()=>n.abort(),2e4),o=new URL("string"==typeof e?e:e.toString());!o.searchParams.has("key")&&ea&&o.searchParams.set("key",ea),e=o;try{let t=await fetch(e,{...a,signal:n.signal});if(t.ok)return t;if((429===t.status||t.status>=500)&&s>0)return console.warn("[ITAD ".concat(r,"] ").concat(t.status," ").concat(t.statusText," -> retrying... (").concat(s," left)")),await el(i),eo(e,{...a,retries:s-1,retryDelayMs:2*i,label:r});let l=await t.text().catch(()=>"");throw Error("HTTP ".concat(t.status,": ").concat(t.statusText," ").concat(l?"| body=".concat(l.slice(0,256)):""))}catch(t){if(s>0)return console.warn("[ITAD ".concat(r,"] error: ").concat(t instanceof Error?t.message:String(t)," -> retrying... (").concat(s," left)")),await el(i),eo(e,{...a,retries:s-1,retryDelayMs:2*i,label:r});throw t}finally{clearTimeout(l)}}async function eu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,s=new URL("".concat(er,"/games/search/v1"));s.searchParams.set("title",e),s.searchParams.set("results",String(t));let i=await eo(s,{method:"GET",label:"search"}),r=await i.json();return Array.isArray(r)?r:[]}async function ec(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"JP",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:en,i=new URL("".concat(er,"/games/prices/v3"));return i.searchParams.set("country",t),i.searchParams.set("shops",s.join(",")),i.searchParams.set("deals","false"),(await eo(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),label:"prices-v3"})).json()}async function eh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"JP",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:en,i=new URL("".concat(er,"/games/storelow/v2"));return i.searchParams.set("country",t),i.searchParams.set("shops",s.join(",")),(await eo(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),label:"storelow-v2"})).json()}async function ed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"JP",s=new URL("".concat(er,"/games/overview/v2"));return s.searchParams.set("country",t),(await eo(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),label:"overview-v2"})).json()}async function ep(e){try{var t,s,i,r,a,n,l,o,u;let[c,h,d,p]=await Promise.all([ec([e],"JP",en),eh([e],"JP",en),ed([e],"JP"),fetch("".concat(er,"/games/overview/v2?country=").concat("JP","&key=").concat(ea),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([e])}).then(e=>e.json())]),m=new Map,v=null==c?void 0:c[0],f=(null==p?void 0:p.bundles)||[],b=(null==d||null==(t=d[0])?void 0:t.title)||(null==v?void 0:v.title)||e,_=(e,t)=>{let s=e.get(t.id);if(s)return s;let i={storeId:t.id,storeName:t.name};return e.set(t.id,i),i};(null!=(r=null==v?void 0:v.deals)?r:[]).forEach(e=>{var t,s,i,r,a,n,l,o,u,c,h,d,p,v;let f=_(m,e.shop),b=null!=(l=null!=(n=null==(t=e.price)?void 0:t.amountInt)?n:null==(s=e.price)?void 0:s.amount)?l:null,y=null!=(u=null!=(o=null==(i=e.regular)?void 0:i.amountInt)?o:null==(r=e.regular)?void 0:r.amount)?u:null,g=null!=(c=e.cut)?c:0,w=!!(g>0&&y&&b&&b<y),x=null;if(0===b)switch(null==(h=e.shop)?void 0:h.id){case 48:x={service:"Xbox Game Pass",type:"subscription"};break;case 16:x={service:"Epic Games Store",type:"free"}}f.now={price:b,regularPrice:y,cut:g,isOnSale:w,subscriptionInfo:x,currency:null!=(d=null==(a=e.price)?void 0:a.currency)?d:"JPY",url:null!=(p=e.url)?p:"",ts:null!=(v=e.timestamp)?v:new Date().toISOString()}});let y=null==h?void 0:h[0];(null!=(a=null==y?void 0:y.lows)?a:[]).forEach(e=>{var t,s,i,r,a,n;_(m,e.shop).storeLowAll={price:"number"==typeof e.price?e.price:null!=(r=null!=(i=null==(t=e.price)?void 0:t.amountInt)?i:null==(s=e.price)?void 0:s.amount)?r:null,date:null!=(n=null!=(a=e.added)?a:e.recorded)?n:""}});let g=null==d?void 0:d[0],w=null==g||null==(s=g.lowest)?void 0:s.price,x="number"==typeof w?w:null!=(l=null!=(n=null==w?void 0:w.amountInt)?n:null==w?void 0:w.amount)?l:null,S=(null==g?void 0:g.lowest)?{allTimeLow:{price:x,store:null!=(o=null==(i=g.lowest.shop)?void 0:i.name)?o:"",date:null!=(u=g.lowest.added)?u:""}}:{},j=Array.from(m.values()).sort((e,t)=>e.storeId-t.storeId);return{data:{[e]:{title:b,list:j.filter(e=>{var t,s;return(null==(t=e.now)?void 0:t.price)!==void 0&&(null==(s=e.now)?void 0:s.price)!==null}).map(e=>{var t,s,i,r,a,n,l;return{id:e.storeId.toString(),name:e.storeName,priceJPY:e.now.price,regularPriceJPY:"number"==typeof(null==(t=e.now)?void 0:t.regularPrice)?e.now.regularPrice:null,discountPercent:(null==(s=e.now)?void 0:s.cut)||0,isOnSale:(null==(i=e.now)?void 0:i.isOnSale)||!1,url:(null==(r=e.now)?void 0:r.url)||"",availability:(null==(a=e.now)?void 0:a.price)?"available":"unavailable",timestamp:(null==(n=e.now)?void 0:n.ts)||new Date().toISOString(),subscriptionInfo:(null==(l=e.now)?void 0:l.subscriptionInfo)||null}}),bundleInfo:(null==f?void 0:f.map(e=>{var t,s,i;return{name:e.title||"",url:e.url||"",priceJPY:(null==(i=e.tiers)||null==(s=i[0])||null==(t=s.price)?void 0:t.amountInt)||0}}))||null,storeLowAll:j.filter(e=>e.storeLowAll&&"number"==typeof e.storeLowAll.price).map(e=>{var t;return{id:e.storeId.toString(),name:e.storeName,priceJPY:e.storeLowAll.price,url:"",availability:"historical",timestamp:(null==(t=e.storeLowAll)?void 0:t.date)||""}}),summary:{allTimeLow:S.allTimeLow?{priceJPY:"number"==typeof S.allTimeLow.price?S.allTimeLow.price:0,shopName:S.allTimeLow.store||"",timestamp:S.allTimeLow.date||""}:null}}}}}catch(e){throw console.error("Quote data fetch error:",e),e}}},90454,e=>{"use strict";e.s(["default",()=>u],90454);var t=e.i(43476),s=e.i(71645),i=e.i(18566),r=e.i(66027);function a(e){let{games:s,isLoading:r,query:a}=e,n=(0,i.useRouter)();return a?r?(0,t.jsx)("div",{className:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"検索中..."})]})}):0===s.length?(0,t.jsx)("div",{className:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"🔍"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"検索結果が見つかりません"}),(0,t.jsxs)("p",{className:"text-gray-500",children:["「",a,"」に一致するゲームが見つかりませんでした。"]})]})}):(0,t.jsxs)("div",{className:"mt-8 space-y-4",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["検索結果: 「",a,"」(",s.length,"件)"]}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,t.jsx)("div",{className:"divide-y divide-gray-100",children:s.map(e=>{var s;return(0,t.jsx)("div",{onClick:()=>(e=>{let t=encodeURIComponent(e.title);n.push("/price?id=".concat(e.id,"&title=").concat(t))})(e),className:"p-4 hover:bg-blue-50 cursor-pointer transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(null==(s=e.assets)?void 0:s.banner145)?(0,t.jsx)("img",{src:e.assets.banner145,alt:e.title,className:"w-16 h-16 object-cover rounded-lg flex-shrink-0",onError:e=>{e.target.style.display="none"}}):(0,t.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("span",{className:"text-lg font-semibold text-blue-600",children:"🎮"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:e.title}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e.type&&(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-600 mr-2",children:e.type}),"ID: ",e.id]})]}),(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},e.id)})})})]}):null}var n=e.i(17010);async function l(e){if(!e.trim())return{data:[]};try{return{data:(await (0,n.itadSearchByTitle)(e.trim(),20)).filter(e=>"game"===e.type||!e.type)}}catch(e){throw Error("検索に失敗しました")}}function o(){let e=(0,i.useSearchParams)(),n=(0,i.useRouter)(),o=e.get("query")||"",[u,c]=(0,s.useState)(o),h=function(e,t){let[i,r]=(0,s.useState)(e);return(0,s.useEffect)(()=>{let t=setTimeout(()=>{r(e)},300);return()=>{clearTimeout(t)}},[e,300]),i}(u,300);(0,s.useEffect)(()=>{let e=new URLSearchParams;h.trim()&&e.set("query",h.trim());let t=e.toString()?"/search?".concat(e.toString()):"/search";window.history.replaceState({},"",t)},[h]);let{data:d,isLoading:p,error:m}=(0,r.useQuery)({queryKey:["search",h],queryFn:()=>l(h),enabled:h.trim().length>0});return(0,t.jsx)("div",{className:"min-h-screen bg-background text-foreground",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,t.jsx)("button",{onClick:()=>{n.push("/")},className:"px-4 py-2 text-blue-600 hover:text-blue-800 transition-colors",children:"← ホームに戻る"}),(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"ゲーム検索"})]}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:u,onChange:e=>c(e.target.value),placeholder:"ゲームを検索...",className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0}),u&&(0,t.jsx)("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),m&&(0,t.jsx)("div",{className:"mb-8 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-red-600",children:"検索中にエラーが発生しました。再試行してください。"})}),(0,t.jsx)(a,{games:(null==d?void 0:d.data)||[],isLoading:p,query:h})]})})})}function u(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-background text-foreground flex items-center justify-center",children:(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),children:(0,t.jsx)(o,{})})}}]);