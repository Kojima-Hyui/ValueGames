(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,i)=>{t.exports=e.r(76562)},66027,17010,e=>{"use strict";e.s(["useQuery",()=>ei],66027);var t,i,s,a,r,n,l,o,u,h,c,d,p,v,f,_,m,w,b,y,g,S,T,R,O=e.i(39946),P=e.i(70292),k=e.i(62351),C=e.i(37696),E=e.i(88245),I=e.i(75555),M=e.i(40143),L=e.i(86491),W=e.i(15823),U=e.i(93803),x=e.i(19273),A=e.i(80166),D=(t=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,r=new WeakMap,n=new WeakMap,l=new WeakMap,o=new WeakMap,u=new WeakMap,h=new WeakMap,c=new WeakMap,d=new WeakMap,p=new WeakMap,v=new WeakMap,f=new WeakMap,_=new WeakSet,m=new WeakSet,w=new WeakSet,b=new WeakSet,y=new WeakSet,g=new WeakSet,S=new WeakSet,T=new WeakSet,R=new WeakSet,class extends W.Subscribable{bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&((0,O._)(this,i).addObserver(this),j((0,O._)(this,i),this.options)?(0,C._)(this,_,F).call(this):this.updateResult(),(0,C._)(this,y,B).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Q((0,O._)(this,i),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Q((0,O._)(this,i),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,(0,C._)(this,g,G).call(this),(0,C._)(this,S,K).call(this),(0,O._)(this,i).removeObserver(this)}setOptions(e){let s=this.options,a=(0,O._)(this,i);if(this.options=(0,O._)(this,t).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,x.resolveEnabled)(this.options.enabled,(0,O._)(this,i)))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");(0,C._)(this,T,z).call(this),(0,O._)(this,i).setOptions(this.options),s._defaulted&&!(0,x.shallowEqualObjects)(this.options,s)&&(0,O._)(this,t).getQueryCache().notify({type:"observerOptionsUpdated",query:(0,O._)(this,i),observer:this});let r=this.hasListeners();r&&J((0,O._)(this,i),a,this.options,s)&&(0,C._)(this,_,F).call(this),this.updateResult(),r&&((0,O._)(this,i)!==a||(0,x.resolveEnabled)(this.options.enabled,(0,O._)(this,i))!==(0,x.resolveEnabled)(s.enabled,(0,O._)(this,i))||(0,x.resolveStaleTime)(this.options.staleTime,(0,O._)(this,i))!==(0,x.resolveStaleTime)(s.staleTime,(0,O._)(this,i)))&&(0,C._)(this,m,N).call(this);let n=(0,C._)(this,w,Y).call(this);r&&((0,O._)(this,i)!==a||(0,x.resolveEnabled)(this.options.enabled,(0,O._)(this,i))!==(0,x.resolveEnabled)(s.enabled,(0,O._)(this,i))||n!==(0,O._)(this,v))&&(0,C._)(this,b,H).call(this,n)}getOptimisticResult(e){var s,l;let o=(0,O._)(this,t).getQueryCache().build((0,O._)(this,t),e),u=this.createResult(o,e);return s=this,l=u,(0,x.shallowEqualObjects)(s.getCurrentResult(),l)||((0,k._)(this,a,u),(0,k._)(this,n,this.options),(0,k._)(this,r,(0,O._)(this,i).state)),u}getCurrentResult(){return(0,O._)(this,a)}trackResult(e,t){return new Proxy(e,{get:(e,i)=>(this.trackProp(i),null==t||t(i),"promise"!==i||this.options.experimental_prefetchInRender||"pending"!==(0,O._)(this,l).status||(0,O._)(this,l).reject(Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(e,i))})}trackProp(e){(0,O._)(this,f).add(e)}getCurrentQuery(){return(0,O._)(this,i)}refetch(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetch({...e})}fetchOptimistic(e){let i=(0,O._)(this,t).defaultQueryOptions(e),s=(0,O._)(this,t).getQueryCache().build((0,O._)(this,t),i);return s.fetch().then(()=>this.createResult(s,i))}fetch(e){var t;return(0,C._)(this,_,F).call(this,{...e,cancelRefetch:null==(t=e.cancelRefetch)||t}).then(()=>(this.updateResult(),(0,O._)(this,a)))}createResult(e,t){let d,p=(0,O._)(this,i),v=this.options,f=(0,O._)(this,a),_=(0,O._)(this,r),m=(0,O._)(this,n),w=e!==p?e.state:(0,O._)(this,s),{state:b}=e,y={...b},g=!1;if(t._optimisticResults){let i=this.hasListeners(),s=!i&&j(e,t),a=i&&J(e,p,t,v);(s||a)&&(y={...y,...(0,L.fetchState)(b.data,e.options)}),"isRestoring"===t._optimisticResults&&(y.fetchStatus="idle")}let{error:S,errorUpdatedAt:T,status:R}=y;d=y.data;let P=!1;if(void 0!==t.placeholderData&&void 0===d&&"pending"===R){let e;if((null==f?void 0:f.isPlaceholderData)&&t.placeholderData===(null==m?void 0:m.placeholderData))e=f.data,P=!0;else{var C;e="function"==typeof t.placeholderData?t.placeholderData(null==(C=(0,O._)(this,c))?void 0:C.state.data,(0,O._)(this,c)):t.placeholderData}void 0!==e&&(R="success",d=(0,x.replaceData)(null==f?void 0:f.data,e,t),g=!0)}if(t.select&&void 0!==d&&!P)if(f&&d===(null==_?void 0:_.data)&&t.select===(0,O._)(this,u))d=(0,O._)(this,h);else try{(0,k._)(this,u,t.select),d=t.select(d),d=(0,x.replaceData)(null==f?void 0:f.data,d,t),(0,k._)(this,h,d),(0,k._)(this,o,null)}catch(e){(0,k._)(this,o,e)}(0,O._)(this,o)&&(S=(0,O._)(this,o),d=(0,O._)(this,h),T=Date.now(),R="error");let E="fetching"===y.fetchStatus,I="pending"===R,M="error"===R,W=I&&E,A=void 0!==d,D={status:R,fetchStatus:y.fetchStatus,isPending:I,isSuccess:"success"===R,isError:M,isInitialLoading:W,isLoading:W,data:d,dataUpdatedAt:y.dataUpdatedAt,error:S,errorUpdatedAt:T,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>w.dataUpdateCount||y.errorUpdateCount>w.errorUpdateCount,isFetching:E,isRefetching:E&&!I,isLoadingError:M&&!A,isPaused:"paused"===y.fetchStatus,isPlaceholderData:g,isRefetchError:M&&A,isStale:q(e,t),refetch:this.refetch,promise:(0,O._)(this,l),isEnabled:!1!==(0,x.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===D.status?e.reject(D.error):void 0!==D.data&&e.resolve(D.data)},i=()=>{t((0,k._)(this,l,D.promise=(0,U.pendingThenable)()))},s=(0,O._)(this,l);switch(s.status){case"pending":e.queryHash===p.queryHash&&t(s);break;case"fulfilled":("error"===D.status||D.data!==s.value)&&i();break;case"rejected":("error"!==D.status||D.error!==s.reason)&&i()}}return D}updateResult(){let e=(0,O._)(this,a),t=this.createResult((0,O._)(this,i),this.options);if((0,k._)(this,r,(0,O._)(this,i).state),(0,k._)(this,n,this.options),void 0!==(0,O._)(this,r).data&&(0,k._)(this,c,(0,O._)(this,i)),(0,x.shallowEqualObjects)(t,e))return;(0,k._)(this,a,t);let s=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,i="function"==typeof t?t():t;if("all"===i||!i&&!(0,O._)(this,f).size)return!0;let s=new Set(null!=i?i:(0,O._)(this,f));return this.options.throwOnError&&s.add("error"),Object.keys((0,O._)(this,a)).some(t=>(0,O._)(this,a)[t]!==e[t]&&s.has(t))};(0,C._)(this,R,V).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&(0,C._)(this,y,B).call(this)}constructor(e,O){super(),(0,E._)(this,_),(0,E._)(this,m),(0,E._)(this,w),(0,E._)(this,b),(0,E._)(this,y),(0,E._)(this,g),(0,E._)(this,S),(0,E._)(this,T),(0,E._)(this,R),(0,P._)(this,t,{writable:!0,value:void 0}),(0,P._)(this,i,{writable:!0,value:void 0}),(0,P._)(this,s,{writable:!0,value:void 0}),(0,P._)(this,a,{writable:!0,value:void 0}),(0,P._)(this,r,{writable:!0,value:void 0}),(0,P._)(this,n,{writable:!0,value:void 0}),(0,P._)(this,l,{writable:!0,value:void 0}),(0,P._)(this,o,{writable:!0,value:void 0}),(0,P._)(this,u,{writable:!0,value:void 0}),(0,P._)(this,h,{writable:!0,value:void 0}),(0,P._)(this,c,{writable:!0,value:void 0}),(0,P._)(this,d,{writable:!0,value:void 0}),(0,P._)(this,p,{writable:!0,value:void 0}),(0,P._)(this,v,{writable:!0,value:void 0}),(0,P._)(this,f,{writable:!0,value:new Set}),this.options=O,(0,k._)(this,t,e),(0,k._)(this,o,null),(0,k._)(this,l,(0,U.pendingThenable)()),this.bindMethods(),this.setOptions(O)}});function j(e,t){return!1!==(0,x.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&Q(e,t,t.refetchOnMount)}function Q(e,t,i){if(!1!==(0,x.resolveEnabled)(t.enabled,e)&&"static"!==(0,x.resolveStaleTime)(t.staleTime,e)){let s="function"==typeof i?i(e):i;return"always"===s||!1!==s&&q(e,t)}return!1}function J(e,t,i,s){return(e!==t||!1===(0,x.resolveEnabled)(s.enabled,e))&&(!i.suspense||"error"!==e.state.status)&&q(e,i)}function q(e,t){return!1!==(0,x.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,x.resolveStaleTime)(t.staleTime,e))}function F(e){(0,C._)(this,T,z).call(this);let t=(0,O._)(this,i).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(x.noop)),t}function N(){(0,C._)(this,g,G).call(this);let e=(0,x.resolveStaleTime)(this.options.staleTime,(0,O._)(this,i));if(x.isServer||(0,O._)(this,a).isStale||!(0,x.isValidTimeout)(e))return;let t=(0,x.timeUntilStale)((0,O._)(this,a).dataUpdatedAt,e);(0,k._)(this,d,A.timeoutManager.setTimeout(()=>{(0,O._)(this,a).isStale||this.updateResult()},t+1))}function Y(){var e;return null!=(e="function"==typeof this.options.refetchInterval?this.options.refetchInterval((0,O._)(this,i)):this.options.refetchInterval)&&e}function H(e){(0,C._)(this,S,K).call(this),(0,k._)(this,v,e),!x.isServer&&!1!==(0,x.resolveEnabled)(this.options.enabled,(0,O._)(this,i))&&(0,x.isValidTimeout)((0,O._)(this,v))&&0!==(0,O._)(this,v)&&(0,k._)(this,p,A.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||I.focusManager.isFocused())&&(0,C._)(this,_,F).call(this)},(0,O._)(this,v)))}function B(){(0,C._)(this,m,N).call(this),(0,C._)(this,b,H).call(this,(0,C._)(this,w,Y).call(this))}function G(){(0,O._)(this,d)&&(A.timeoutManager.clearTimeout((0,O._)(this,d)),(0,k._)(this,d,void 0))}function K(){(0,O._)(this,p)&&(A.timeoutManager.clearInterval((0,O._)(this,p)),(0,k._)(this,p,void 0))}function z(){let e=(0,O._)(this,t).getQueryCache().build((0,O._)(this,t),this.options);if(e===(0,O._)(this,i))return;let a=(0,O._)(this,i);(0,k._)(this,i,e),(0,k._)(this,s,e.state),this.hasListeners()&&(null==a||a.removeObserver(this),e.addObserver(this))}function V(e){M.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e((0,O._)(this,a))}),(0,O._)(this,t).getQueryCache().notify({query:(0,O._)(this,i),type:"observerResultsUpdated"})})}e.i(47167);var X=e.i(71645),Z=e.i(12598);e.i(43476);var $=X.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),ee=X.createContext(!1);ee.Provider;var et=(e,t,i)=>t.fetchOptimistic(e).catch(()=>{i.clearReset()});function ei(e,t){return function(e,t,i){var s,a,r,n,l;let o=X.useContext(ee),u=X.useContext($),h=(0,Z.useQueryClient)(i),c=h.defaultQueryOptions(e);if(null==(a=h.getDefaultOptions().queries)||null==(s=a._experimental_beforeQuery)||s.call(a,c),c._optimisticResults=o?"isRestoring":"optimistic",c.suspense){let e=e=>"static"===e?e:Math.max(null!=e?e:1e3,1e3),t=c.staleTime;c.staleTime="function"==typeof t?function(){for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return e(t(...s))}:e(t),"number"==typeof c.gcTime&&(c.gcTime=Math.max(c.gcTime,1e3))}(c.suspense||c.throwOnError||c.experimental_prefetchInRender)&&!u.isReset()&&(c.retryOnMount=!1),X.useEffect(()=>{u.clearReset()},[u]);let d=!h.getQueryCache().get(c.queryHash),[p]=X.useState(()=>new t(h,c)),v=p.getOptimisticResult(c),f=!o&&!1!==e.subscribed;if(X.useSyncExternalStore(X.useCallback(e=>{let t=f?p.subscribe(M.notifyManager.batchCalls(e)):x.noop;return p.updateResult(),t},[p,f]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),X.useEffect(()=>{p.setOptions(c)},[c,p]),(null==c?void 0:c.suspense)&&v.isPending)throw et(c,p,u);if((e=>{let{result:t,errorResetBoundary:i,throwOnError:s,query:a,suspense:r}=e;return t.isError&&!i.isReset()&&!t.isFetching&&a&&(r&&void 0===t.data||(0,x.shouldThrowError)(s,[t.error,a]))})({result:v,errorResetBoundary:u,throwOnError:c.throwOnError,query:h.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw v.error;if(null==(n=h.getDefaultOptions().queries)||null==(r=n._experimental_afterQuery)||r.call(n,c,v),c.experimental_prefetchInRender&&!x.isServer&&v.isLoading&&v.isFetching&&!o){let e=d?et(c,p,u):null==(l=h.getQueryCache().get(c.queryHash))?void 0:l.promise;null==e||e.catch(x.noop).finally(()=>{p.updateResult()})}return c.notifyOnChangeProps?v:p.trackResult(v)}(e,D,t)}e.s(["getQuoteData",()=>ed,"itadSearchByTitle",()=>eo],17010);let es="https://api.isthereanydeal.com",ea="c0976eafdab986bfcb33938af615368ae9eefa4f";console.log("[ITAD Client] API_KEY status:","set");let er=[61,16,35,37,48,6,36];async function en(e){return new Promise(t=>setTimeout(t,e))}async function el(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{retries:i=2,retryDelayMs:s=600,label:a="itad",...r}=t,n=new AbortController,l=setTimeout(()=>n.abort(),2e4),o=new URL("string"==typeof e?e:e.toString());!o.searchParams.has("key")&&ea&&o.searchParams.set("key",ea),e=o;try{let t=await fetch(e,{...r,signal:n.signal});if(t.ok)return t;if((429===t.status||t.status>=500)&&i>0)return console.warn("[ITAD ".concat(a,"] ").concat(t.status," ").concat(t.statusText," -> retrying... (").concat(i," left)")),await en(s),el(e,{...r,retries:i-1,retryDelayMs:2*s,label:a});let l=await t.text().catch(()=>"");throw Error("HTTP ".concat(t.status,": ").concat(t.statusText," ").concat(l?"| body=".concat(l.slice(0,256)):""))}catch(t){if(i>0)return console.warn("[ITAD ".concat(a,"] error: ").concat(t instanceof Error?t.message:String(t)," -> retrying... (").concat(i," left)")),await en(s),el(e,{...r,retries:i-1,retryDelayMs:2*s,label:a});throw t}finally{clearTimeout(l)}}async function eo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,i=new URL("".concat(es,"/games/search/v1"));i.searchParams.set("title",e),i.searchParams.set("results",String(t));let s=await el(i,{method:"GET",label:"search"}),a=await s.json();return Array.isArray(a)?a:[]}async function eu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"JP",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:er,s=new URL("".concat(es,"/games/prices/v3"));return s.searchParams.set("country",t),s.searchParams.set("shops",i.join(",")),s.searchParams.set("deals","false"),(await el(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),label:"prices-v3"})).json()}async function eh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"JP",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:er,s=new URL("".concat(es,"/games/storelow/v2"));return s.searchParams.set("country",t),s.searchParams.set("shops",i.join(",")),(await el(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),label:"storelow-v2"})).json()}async function ec(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"JP",i=new URL("".concat(es,"/games/overview/v2"));return i.searchParams.set("country",t),(await el(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),label:"overview-v2"})).json()}async function ed(e){try{var t,i,s,a,r,n,l,o,u;let[h,c,d,p]=await Promise.all([eu([e],"JP",er),eh([e],"JP",er),ec([e],"JP"),fetch("".concat(es,"/games/overview/v2?country=").concat("JP","&key=").concat(ea),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([e])}).then(e=>e.json())]),v=new Map,f=null==h?void 0:h[0],_=(null==p?void 0:p.bundles)||[],m=(null==d||null==(t=d[0])?void 0:t.title)||(null==f?void 0:f.title)||e,w=(e,t)=>{let i=e.get(t.id);if(i)return i;let s={storeId:t.id,storeName:t.name};return e.set(t.id,s),s};(null!=(a=null==f?void 0:f.deals)?a:[]).forEach(e=>{var t,i,s,a,r,n,l,o,u,h,c,d,p,f;let _=w(v,e.shop),m=null!=(l=null!=(n=null==(t=e.price)?void 0:t.amountInt)?n:null==(i=e.price)?void 0:i.amount)?l:null,b=null!=(u=null!=(o=null==(s=e.regular)?void 0:s.amountInt)?o:null==(a=e.regular)?void 0:a.amount)?u:null,y=null!=(h=e.cut)?h:0,g=!!(y>0&&b&&m&&m<b),S=null;if(0===m)switch(null==(c=e.shop)?void 0:c.id){case 48:S={service:"Xbox Game Pass",type:"subscription"};break;case 16:S={service:"Epic Games Store",type:"free"}}_.now={price:m,regularPrice:b,cut:y,isOnSale:g,subscriptionInfo:S,currency:null!=(d=null==(r=e.price)?void 0:r.currency)?d:"JPY",url:null!=(p=e.url)?p:"",ts:null!=(f=e.timestamp)?f:new Date().toISOString()}});let b=null==c?void 0:c[0];(null!=(r=null==b?void 0:b.lows)?r:[]).forEach(e=>{var t,i,s,a,r,n;w(v,e.shop).storeLowAll={price:"number"==typeof e.price?e.price:null!=(a=null!=(s=null==(t=e.price)?void 0:t.amountInt)?s:null==(i=e.price)?void 0:i.amount)?a:null,date:null!=(n=null!=(r=e.added)?r:e.recorded)?n:""}});let y=null==d?void 0:d[0],g=null==y||null==(i=y.lowest)?void 0:i.price,S="number"==typeof g?g:null!=(l=null!=(n=null==g?void 0:g.amountInt)?n:null==g?void 0:g.amount)?l:null,T=(null==y?void 0:y.lowest)?{allTimeLow:{price:S,store:null!=(o=null==(s=y.lowest.shop)?void 0:s.name)?o:"",date:null!=(u=y.lowest.added)?u:""}}:{},R=Array.from(v.values()).sort((e,t)=>e.storeId-t.storeId);return{data:{[e]:{title:m,list:R.filter(e=>{var t,i;return(null==(t=e.now)?void 0:t.price)!==void 0&&(null==(i=e.now)?void 0:i.price)!==null}).map(e=>{var t,i,s,a,r,n,l;return{id:e.storeId.toString(),name:e.storeName,priceJPY:e.now.price,regularPriceJPY:"number"==typeof(null==(t=e.now)?void 0:t.regularPrice)?e.now.regularPrice:null,discountPercent:(null==(i=e.now)?void 0:i.cut)||0,isOnSale:(null==(s=e.now)?void 0:s.isOnSale)||!1,url:(null==(a=e.now)?void 0:a.url)||"",availability:(null==(r=e.now)?void 0:r.price)?"available":"unavailable",timestamp:(null==(n=e.now)?void 0:n.ts)||new Date().toISOString(),subscriptionInfo:(null==(l=e.now)?void 0:l.subscriptionInfo)||null}}),bundleInfo:(null==_?void 0:_.map(e=>{var t,i,s;return{name:e.title||"",url:e.url||"",priceJPY:(null==(s=e.tiers)||null==(i=s[0])||null==(t=i.price)?void 0:t.amountInt)||0}}))||null,storeLowAll:R.filter(e=>e.storeLowAll&&"number"==typeof e.storeLowAll.price).map(e=>{var t;return{id:e.storeId.toString(),name:e.storeName,priceJPY:e.storeLowAll.price,url:"",availability:"historical",timestamp:(null==(t=e.storeLowAll)?void 0:t.date)||""}}),summary:{allTimeLow:T.allTimeLow?{priceJPY:"number"==typeof T.allTimeLow.price?T.allTimeLow.price:0,shopName:T.allTimeLow.store||"",timestamp:T.allTimeLow.date||""}:null}}}}}catch(e){throw console.error("Quote data fetch error:",e),e}}}]);