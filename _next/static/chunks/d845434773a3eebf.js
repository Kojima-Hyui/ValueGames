(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(t,e,i)=>{e.exports=t.r(76562)},66027,17010,t=>{"use strict";t.s(["useQuery",()=>ti],66027);var e,i,s,a,r,n,o,l,h,u,c,d,p,f,_,v,m,g,b,w,y,S,R,M,T=t.i(39946),O=t.i(70292),P=t.i(62351),C=t.i(37696),k=t.i(88245),I=t.i(75555),E=t.i(40143),D=t.i(86491),A=t.i(15823),U=t.i(93803),W=t.i(19273),x=t.i(80166),Q=(e=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,r=new WeakMap,n=new WeakMap,o=new WeakMap,l=new WeakMap,h=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,_=new WeakMap,v=new WeakSet,m=new WeakSet,g=new WeakSet,b=new WeakSet,w=new WeakSet,y=new WeakSet,S=new WeakSet,R=new WeakSet,M=new WeakSet,class extends A.Subscribable{bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&((0,T._)(this,i).addObserver(this),j((0,T._)(this,i),this.options)?(0,C._)(this,v,F).call(this):this.updateResult(),(0,C._)(this,w,B).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return L((0,T._)(this,i),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return L((0,T._)(this,i),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,(0,C._)(this,y,K).call(this),(0,C._)(this,S,N).call(this),(0,T._)(this,i).removeObserver(this)}setOptions(t){let s=this.options,a=(0,T._)(this,i);if(this.options=(0,T._)(this,e).defaultQueryOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,W.resolveEnabled)(this.options.enabled,(0,T._)(this,i)))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");(0,C._)(this,R,z).call(this),(0,T._)(this,i).setOptions(this.options),s._defaulted&&!(0,W.shallowEqualObjects)(this.options,s)&&(0,T._)(this,e).getQueryCache().notify({type:"observerOptionsUpdated",query:(0,T._)(this,i),observer:this});let r=this.hasListeners();r&&q((0,T._)(this,i),a,this.options,s)&&(0,C._)(this,v,F).call(this),this.updateResult(),r&&((0,T._)(this,i)!==a||(0,W.resolveEnabled)(this.options.enabled,(0,T._)(this,i))!==(0,W.resolveEnabled)(s.enabled,(0,T._)(this,i))||(0,W.resolveStaleTime)(this.options.staleTime,(0,T._)(this,i))!==(0,W.resolveStaleTime)(s.staleTime,(0,T._)(this,i)))&&(0,C._)(this,m,Y).call(this);let n=(0,C._)(this,g,G).call(this);r&&((0,T._)(this,i)!==a||(0,W.resolveEnabled)(this.options.enabled,(0,T._)(this,i))!==(0,W.resolveEnabled)(s.enabled,(0,T._)(this,i))||n!==(0,T._)(this,f))&&(0,C._)(this,b,H).call(this,n)}getOptimisticResult(t){var s,o;let l=(0,T._)(this,e).getQueryCache().build((0,T._)(this,e),t),h=this.createResult(l,t);return s=this,o=h,(0,W.shallowEqualObjects)(s.getCurrentResult(),o)||((0,P._)(this,a,h),(0,P._)(this,n,this.options),(0,P._)(this,r,(0,T._)(this,i).state)),h}getCurrentResult(){return(0,T._)(this,a)}trackResult(t,e){return new Proxy(t,{get:(t,i)=>(this.trackProp(i),null==e||e(i),"promise"!==i||this.options.experimental_prefetchInRender||"pending"!==(0,T._)(this,o).status||(0,T._)(this,o).reject(Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(t,i))})}trackProp(t){(0,T._)(this,_).add(t)}getCurrentQuery(){return(0,T._)(this,i)}refetch(){let{...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetch({...t})}fetchOptimistic(t){let i=(0,T._)(this,e).defaultQueryOptions(t),s=(0,T._)(this,e).getQueryCache().build((0,T._)(this,e),i);return s.fetch().then(()=>this.createResult(s,i))}fetch(t){var e;return(0,C._)(this,v,F).call(this,{...t,cancelRefetch:null==(e=t.cancelRefetch)||e}).then(()=>(this.updateResult(),(0,T._)(this,a)))}createResult(t,e){let d,p=(0,T._)(this,i),f=this.options,_=(0,T._)(this,a),v=(0,T._)(this,r),m=(0,T._)(this,n),g=t!==p?t.state:(0,T._)(this,s),{state:b}=t,w={...b},y=!1;if(e._optimisticResults){let i=this.hasListeners(),s=!i&&j(t,e),a=i&&q(t,p,e,f);(s||a)&&(w={...w,...(0,D.fetchState)(b.data,t.options)}),"isRestoring"===e._optimisticResults&&(w.fetchStatus="idle")}let{error:S,errorUpdatedAt:R,status:M}=w;d=w.data;let O=!1;if(void 0!==e.placeholderData&&void 0===d&&"pending"===M){let t;if((null==_?void 0:_.isPlaceholderData)&&e.placeholderData===(null==m?void 0:m.placeholderData))t=_.data,O=!0;else{var C;t="function"==typeof e.placeholderData?e.placeholderData(null==(C=(0,T._)(this,c))?void 0:C.state.data,(0,T._)(this,c)):e.placeholderData}void 0!==t&&(M="success",d=(0,W.replaceData)(null==_?void 0:_.data,t,e),y=!0)}if(e.select&&void 0!==d&&!O)if(_&&d===(null==v?void 0:v.data)&&e.select===(0,T._)(this,h))d=(0,T._)(this,u);else try{(0,P._)(this,h,e.select),d=e.select(d),d=(0,W.replaceData)(null==_?void 0:_.data,d,e),(0,P._)(this,u,d),(0,P._)(this,l,null)}catch(t){(0,P._)(this,l,t)}(0,T._)(this,l)&&(S=(0,T._)(this,l),d=(0,T._)(this,u),R=Date.now(),M="error");let k="fetching"===w.fetchStatus,I="pending"===M,E="error"===M,A=I&&k,x=void 0!==d,Q={status:M,fetchStatus:w.fetchStatus,isPending:I,isSuccess:"success"===M,isError:E,isInitialLoading:A,isLoading:A,data:d,dataUpdatedAt:w.dataUpdatedAt,error:S,errorUpdatedAt:R,failureCount:w.fetchFailureCount,failureReason:w.fetchFailureReason,errorUpdateCount:w.errorUpdateCount,isFetched:w.dataUpdateCount>0||w.errorUpdateCount>0,isFetchedAfterMount:w.dataUpdateCount>g.dataUpdateCount||w.errorUpdateCount>g.errorUpdateCount,isFetching:k,isRefetching:k&&!I,isLoadingError:E&&!x,isPaused:"paused"===w.fetchStatus,isPlaceholderData:y,isRefetchError:E&&x,isStale:J(t,e),refetch:this.refetch,promise:(0,T._)(this,o),isEnabled:!1!==(0,W.resolveEnabled)(e.enabled,t)};if(this.options.experimental_prefetchInRender){let e=t=>{"error"===Q.status?t.reject(Q.error):void 0!==Q.data&&t.resolve(Q.data)},i=()=>{e((0,P._)(this,o,Q.promise=(0,U.pendingThenable)()))},s=(0,T._)(this,o);switch(s.status){case"pending":t.queryHash===p.queryHash&&e(s);break;case"fulfilled":("error"===Q.status||Q.data!==s.value)&&i();break;case"rejected":("error"!==Q.status||Q.error!==s.reason)&&i()}}return Q}updateResult(){let t=(0,T._)(this,a),e=this.createResult((0,T._)(this,i),this.options);if((0,P._)(this,r,(0,T._)(this,i).state),(0,P._)(this,n,this.options),void 0!==(0,T._)(this,r).data&&(0,P._)(this,c,(0,T._)(this,i)),(0,W.shallowEqualObjects)(e,t))return;(0,P._)(this,a,e);let s=()=>{if(!t)return!0;let{notifyOnChangeProps:e}=this.options,i="function"==typeof e?e():e;if("all"===i||!i&&!(0,T._)(this,_).size)return!0;let s=new Set(null!=i?i:(0,T._)(this,_));return this.options.throwOnError&&s.add("error"),Object.keys((0,T._)(this,a)).some(e=>(0,T._)(this,a)[e]!==t[e]&&s.has(e))};(0,C._)(this,M,V).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&(0,C._)(this,w,B).call(this)}constructor(t,T){super(),(0,k._)(this,v),(0,k._)(this,m),(0,k._)(this,g),(0,k._)(this,b),(0,k._)(this,w),(0,k._)(this,y),(0,k._)(this,S),(0,k._)(this,R),(0,k._)(this,M),(0,O._)(this,e,{writable:!0,value:void 0}),(0,O._)(this,i,{writable:!0,value:void 0}),(0,O._)(this,s,{writable:!0,value:void 0}),(0,O._)(this,a,{writable:!0,value:void 0}),(0,O._)(this,r,{writable:!0,value:void 0}),(0,O._)(this,n,{writable:!0,value:void 0}),(0,O._)(this,o,{writable:!0,value:void 0}),(0,O._)(this,l,{writable:!0,value:void 0}),(0,O._)(this,h,{writable:!0,value:void 0}),(0,O._)(this,u,{writable:!0,value:void 0}),(0,O._)(this,c,{writable:!0,value:void 0}),(0,O._)(this,d,{writable:!0,value:void 0}),(0,O._)(this,p,{writable:!0,value:void 0}),(0,O._)(this,f,{writable:!0,value:void 0}),(0,O._)(this,_,{writable:!0,value:new Set}),this.options=T,(0,P._)(this,e,t),(0,P._)(this,l,null),(0,P._)(this,o,(0,U.pendingThenable)()),this.bindMethods(),this.setOptions(T)}});function j(t,e){return!1!==(0,W.resolveEnabled)(e.enabled,t)&&void 0===t.state.data&&("error"!==t.state.status||!1!==e.retryOnMount)||void 0!==t.state.data&&L(t,e,e.refetchOnMount)}function L(t,e,i){if(!1!==(0,W.resolveEnabled)(e.enabled,t)&&"static"!==(0,W.resolveStaleTime)(e.staleTime,t)){let s="function"==typeof i?i(t):i;return"always"===s||!1!==s&&J(t,e)}return!1}function q(t,e,i,s){return(t!==e||!1===(0,W.resolveEnabled)(s.enabled,t))&&(!i.suspense||"error"!==t.state.status)&&J(t,i)}function J(t,e){return!1!==(0,W.resolveEnabled)(e.enabled,t)&&t.isStaleByTime((0,W.resolveStaleTime)(e.staleTime,t))}function F(t){(0,C._)(this,R,z).call(this);let e=(0,T._)(this,i).fetch(this.options,t);return(null==t?void 0:t.throwOnError)||(e=e.catch(W.noop)),e}function Y(){(0,C._)(this,y,K).call(this);let t=(0,W.resolveStaleTime)(this.options.staleTime,(0,T._)(this,i));if(W.isServer||(0,T._)(this,a).isStale||!(0,W.isValidTimeout)(t))return;let e=(0,W.timeUntilStale)((0,T._)(this,a).dataUpdatedAt,t);(0,P._)(this,d,x.timeoutManager.setTimeout(()=>{(0,T._)(this,a).isStale||this.updateResult()},e+1))}function G(){var t;return null!=(t="function"==typeof this.options.refetchInterval?this.options.refetchInterval((0,T._)(this,i)):this.options.refetchInterval)&&t}function H(t){(0,C._)(this,S,N).call(this),(0,P._)(this,f,t),!W.isServer&&!1!==(0,W.resolveEnabled)(this.options.enabled,(0,T._)(this,i))&&(0,W.isValidTimeout)((0,T._)(this,f))&&0!==(0,T._)(this,f)&&(0,P._)(this,p,x.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||I.focusManager.isFocused())&&(0,C._)(this,v,F).call(this)},(0,T._)(this,f)))}function B(){(0,C._)(this,m,Y).call(this),(0,C._)(this,b,H).call(this,(0,C._)(this,g,G).call(this))}function K(){(0,T._)(this,d)&&(x.timeoutManager.clearTimeout((0,T._)(this,d)),(0,P._)(this,d,void 0))}function N(){(0,T._)(this,p)&&(x.timeoutManager.clearInterval((0,T._)(this,p)),(0,P._)(this,p,void 0))}function z(){let t=(0,T._)(this,e).getQueryCache().build((0,T._)(this,e),this.options);if(t===(0,T._)(this,i))return;let a=(0,T._)(this,i);(0,P._)(this,i,t),(0,P._)(this,s,t.state),this.hasListeners()&&(null==a||a.removeObserver(this),t.addObserver(this))}function V(t){E.notifyManager.batch(()=>{t.listeners&&this.listeners.forEach(t=>{t((0,T._)(this,a))}),(0,T._)(this,e).getQueryCache().notify({query:(0,T._)(this,i),type:"observerResultsUpdated"})})}t.i(47167);var Z=t.i(71645),X=t.i(12598);t.i(43476);var $=Z.createContext(function(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}()),tt=Z.createContext(!1);tt.Provider;var te=(t,e,i)=>e.fetchOptimistic(t).catch(()=>{i.clearReset()});function ti(t,e){return function(t,e,i){var s,a,r,n,o;let l=Z.useContext(tt),h=Z.useContext($),u=(0,X.useQueryClient)(i),c=u.defaultQueryOptions(t);if(null==(a=u.getDefaultOptions().queries)||null==(s=a._experimental_beforeQuery)||s.call(a,c),c._optimisticResults=l?"isRestoring":"optimistic",c.suspense){let t=t=>"static"===t?t:Math.max(null!=t?t:1e3,1e3),e=c.staleTime;c.staleTime="function"==typeof e?function(){for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return t(e(...s))}:t(e),"number"==typeof c.gcTime&&(c.gcTime=Math.max(c.gcTime,1e3))}(c.suspense||c.throwOnError||c.experimental_prefetchInRender)&&!h.isReset()&&(c.retryOnMount=!1),Z.useEffect(()=>{h.clearReset()},[h]);let d=!u.getQueryCache().get(c.queryHash),[p]=Z.useState(()=>new e(u,c)),f=p.getOptimisticResult(c),_=!l&&!1!==t.subscribed;if(Z.useSyncExternalStore(Z.useCallback(t=>{let e=_?p.subscribe(E.notifyManager.batchCalls(t)):W.noop;return p.updateResult(),e},[p,_]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),Z.useEffect(()=>{p.setOptions(c)},[c,p]),(null==c?void 0:c.suspense)&&f.isPending)throw te(c,p,h);if((t=>{let{result:e,errorResetBoundary:i,throwOnError:s,query:a,suspense:r}=t;return e.isError&&!i.isReset()&&!e.isFetching&&a&&(r&&void 0===e.data||(0,W.shouldThrowError)(s,[e.error,a]))})({result:f,errorResetBoundary:h,throwOnError:c.throwOnError,query:u.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw f.error;if(null==(n=u.getDefaultOptions().queries)||null==(r=n._experimental_afterQuery)||r.call(n,c,f),c.experimental_prefetchInRender&&!W.isServer&&f.isLoading&&f.isFetching&&!l){let t=d?te(c,p,h):null==(o=u.getQueryCache().get(c.queryHash))?void 0:o.promise;null==t||t.catch(W.noop).finally(()=>{p.updateResult()})}return c.notifyOnChangeProps?f:p.trackResult(f)}(t,Q,e)}t.s(["getQuoteData",()=>td,"itadSearchByTitle",()=>th],17010);let ts="https://api.isthereanydeal.com",ta="c0976eafdab986bfcb33938af615368ae9eefa4f";function tr(t){let e={"018d937f-2a29-7310-9c92-389377742acf":"7 Days to Die",default:"Sample Game"},i=e[t]||e.default,s=Math.floor(5e3*Math.random())+1e3;return{data:{[t]:{title:i,list:[{id:"61",name:"Steam",priceJPY:s,availability:"available",discountPercent:Math.floor(50*Math.random()),regularPriceJPY:Math.floor(1.2*s),url:"https://store.steampowered.com/app/".concat(Math.floor(1e5*Math.random()),"/"),timestamp:new Date().toISOString(),isOnSale:Math.random()>.5},{id:"16",name:"Epic Games Store",priceJPY:Math.floor(1.1*s),availability:"available",discountPercent:Math.floor(30*Math.random()),regularPriceJPY:Math.floor(1.3*s),url:"https://www.epicgames.com/store/p/".concat(Math.random().toString(36).substr(2,9)),timestamp:new Date().toISOString(),isOnSale:Math.random()>.5},{id:"35",name:"GOG",priceJPY:Math.floor(.95*s),availability:"available",discountPercent:Math.floor(40*Math.random()),regularPriceJPY:Math.floor(1.15*s),url:"https://www.gog.com/game/".concat(Math.random().toString(36).substr(2,9)),timestamp:new Date().toISOString(),isOnSale:Math.random()>.5}],summary:{allTimeLow:{priceJPY:Math.floor(.5*s),shopName:"Steam",timestamp:"2023-12-25T00:00:00Z"}}}}}}console.log("[ITAD Client] API_KEY status:","set"),console.log("[ITAD Client] Using REAL API integration with CORS proxy");let tn=[61,16,35,37,48,6,36];async function to(t){return new Promise(e=>setTimeout(e,t))}async function tl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{retries:i=2,retryDelayMs:s=600,label:a="itad",...r}=e,n=new AbortController,o=setTimeout(()=>n.abort(),2e4),l=new URL("string"==typeof t?t:t.toString());!l.searchParams.has("key")&&ta&&l.searchParams.set("key",ta),t="https://api.allorigins.win/raw?url="+encodeURIComponent(l.toString());try{let e=await fetch(t,{...r,signal:n.signal});if(e.ok)return e;if((429===e.status||e.status>=500)&&i>0)return console.warn("[ITAD ".concat(a,"] ").concat(e.status," ").concat(e.statusText," -> retrying... (").concat(i," left)")),await to(s),tl(t,{...r,retries:i-1,retryDelayMs:2*s,label:a});let o=await e.text().catch(()=>"");throw Error("HTTP ".concat(e.status,": ").concat(e.statusText," ").concat(o?"| body=".concat(o.slice(0,256)):""))}catch(e){if(i>0)return console.warn("[ITAD ".concat(a,"] error: ").concat(e instanceof Error?e.message:String(e)," -> retrying... (").concat(i," left)")),await to(s),tl(t,{...r,retries:i-1,retryDelayMs:2*s,label:a});throw e}finally{clearTimeout(o)}}async function th(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,i=new URL("".concat(ts,"/games/search/v1"));i.searchParams.set("title",t),i.searchParams.set("results",String(e));let s=await tl(i,{method:"GET",label:"search"}),a=await s.json();return Array.isArray(a)?a:[]}async function tu(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"JP",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tn,s=new URL("".concat(ts,"/games/prices/v3"));return s.searchParams.set("country",e),s.searchParams.set("shops",i.join(",")),s.searchParams.set("deals","false"),s.searchParams.set("ids",t.join(",")),(await tl(s,{method:"GET",label:"prices-v3"})).json()}async function tc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"JP",i=new URL("".concat(ts,"/games/overview/v2"));return i.searchParams.set("country",e),i.searchParams.set("ids",t.join(",")),(await tl(i,{method:"GET",label:"overview-v2"})).json()}async function td(t){console.log("[ITAD Client] Attempting to fetch real data via CORS proxy for:",t);try{var e,i,s,a,r;let n=await tu([t]);console.log("[ITAD Client] Prices data received:",n);let o=await tc([t]);console.log("[ITAD Client] Overview data received:",o);let l=null==n||null==(e=n.data)?void 0:e[t],h=null==o||null==(i=o.data)?void 0:i[t];if(!l||!l.list||0===l.list.length)return console.warn("[ITAD Client] No price data found in API response, using mock data"),console.log("[ITAD Client] API Response structure:",{pricesData:n,gameInfo:l}),tr(t);console.log("[ITAD Client] Successfully processing real API data");let u=(l.list||[]).map(t=>{var e,i,s,a,r;return{id:(null==(i=t.shop)||null==(e=i.id)?void 0:e.toString())||Math.random().toString(),name:(null==(s=t.shop)?void 0:s.name)||"Unknown Store",priceJPY:Math.round(((null==(a=t.price)?void 0:a.amountInt)||(null==(r=t.price)?void 0:r.amount)||0)/100),regularPriceJPY:t.regular?Math.round((t.regular.amountInt||t.regular.amount||0)/100):null,discountPercent:t.cut||0,isOnSale:(t.cut||0)>0,url:t.url||"#",availability:"available",timestamp:t.timestamp||new Date().toISOString()}}),c=(null==h?void 0:h.lowest)?{priceJPY:Math.round(((null==(s=h.lowest.price)?void 0:s.amountInt)||(null==(a=h.lowest.price)?void 0:a.amount)||0)/100),shopName:(null==(r=h.lowest.shop)?void 0:r.name)||"Unknown",timestamp:h.lowest.added||new Date().toISOString()}:null,d={data:{[t]:{title:l.title||(null==h?void 0:h.title)||"Unknown Game",list:u,summary:{allTimeLow:c}}}};return console.log("[ITAD Client] Real API data successfully processed:",d),d}catch(e){return console.error("[ITAD Client] API call failed, falling back to mock data:",e),tr(t)}}}]);