(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,i)=>{t.exports=e.r(76562)},66027,17010,e=>{"use strict";e.s(["useQuery",()=>ei],66027);var t,i,s,r,a,l,n,o,u,h,c,d,p,v,_,f,m,w,b,y,g,R,S,T,P=e.i(39946),E=e.i(70292),O=e.i(62351),k=e.i(37696),C=e.i(88245),I=e.i(75555),M=e.i(40143),L=e.i(86491),W=e.i(15823),U=e.i(93803),x=e.i(19273),A=e.i(80166),D=(t=new WeakMap,i=new WeakMap,s=new WeakMap,r=new WeakMap,a=new WeakMap,l=new WeakMap,n=new WeakMap,o=new WeakMap,u=new WeakMap,h=new WeakMap,c=new WeakMap,d=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap,f=new WeakSet,m=new WeakSet,w=new WeakSet,b=new WeakSet,y=new WeakSet,g=new WeakSet,R=new WeakSet,S=new WeakSet,T=new WeakSet,class extends W.Subscribable{bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&((0,P._)(this,i).addObserver(this),Q((0,P._)(this,i),this.options)?(0,k._)(this,f,F).call(this):this.updateResult(),(0,k._)(this,y,B).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return j((0,P._)(this,i),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return j((0,P._)(this,i),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,(0,k._)(this,g,N).call(this),(0,k._)(this,R,K).call(this),(0,P._)(this,i).removeObserver(this)}setOptions(e){let s=this.options,r=(0,P._)(this,i);if(this.options=(0,P._)(this,t).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,x.resolveEnabled)(this.options.enabled,(0,P._)(this,i)))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");(0,k._)(this,S,z).call(this),(0,P._)(this,i).setOptions(this.options),s._defaulted&&!(0,x.shallowEqualObjects)(this.options,s)&&(0,P._)(this,t).getQueryCache().notify({type:"observerOptionsUpdated",query:(0,P._)(this,i),observer:this});let a=this.hasListeners();a&&q((0,P._)(this,i),r,this.options,s)&&(0,k._)(this,f,F).call(this),this.updateResult(),a&&((0,P._)(this,i)!==r||(0,x.resolveEnabled)(this.options.enabled,(0,P._)(this,i))!==(0,x.resolveEnabled)(s.enabled,(0,P._)(this,i))||(0,x.resolveStaleTime)(this.options.staleTime,(0,P._)(this,i))!==(0,x.resolveStaleTime)(s.staleTime,(0,P._)(this,i)))&&(0,k._)(this,m,Y).call(this);let l=(0,k._)(this,w,G).call(this);a&&((0,P._)(this,i)!==r||(0,x.resolveEnabled)(this.options.enabled,(0,P._)(this,i))!==(0,x.resolveEnabled)(s.enabled,(0,P._)(this,i))||l!==(0,P._)(this,v))&&(0,k._)(this,b,H).call(this,l)}getOptimisticResult(e){var s,n;let o=(0,P._)(this,t).getQueryCache().build((0,P._)(this,t),e),u=this.createResult(o,e);return s=this,n=u,(0,x.shallowEqualObjects)(s.getCurrentResult(),n)||((0,O._)(this,r,u),(0,O._)(this,l,this.options),(0,O._)(this,a,(0,P._)(this,i).state)),u}getCurrentResult(){return(0,P._)(this,r)}trackResult(e,t){return new Proxy(e,{get:(e,i)=>(this.trackProp(i),null==t||t(i),"promise"!==i||this.options.experimental_prefetchInRender||"pending"!==(0,P._)(this,n).status||(0,P._)(this,n).reject(Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(e,i))})}trackProp(e){(0,P._)(this,_).add(e)}getCurrentQuery(){return(0,P._)(this,i)}refetch(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetch({...e})}fetchOptimistic(e){let i=(0,P._)(this,t).defaultQueryOptions(e),s=(0,P._)(this,t).getQueryCache().build((0,P._)(this,t),i);return s.fetch().then(()=>this.createResult(s,i))}fetch(e){var t;return(0,k._)(this,f,F).call(this,{...e,cancelRefetch:null==(t=e.cancelRefetch)||t}).then(()=>(this.updateResult(),(0,P._)(this,r)))}createResult(e,t){let d,p=(0,P._)(this,i),v=this.options,_=(0,P._)(this,r),f=(0,P._)(this,a),m=(0,P._)(this,l),w=e!==p?e.state:(0,P._)(this,s),{state:b}=e,y={...b},g=!1;if(t._optimisticResults){let i=this.hasListeners(),s=!i&&Q(e,t),r=i&&q(e,p,t,v);(s||r)&&(y={...y,...(0,L.fetchState)(b.data,e.options)}),"isRestoring"===t._optimisticResults&&(y.fetchStatus="idle")}let{error:R,errorUpdatedAt:S,status:T}=y;d=y.data;let E=!1;if(void 0!==t.placeholderData&&void 0===d&&"pending"===T){let e;if((null==_?void 0:_.isPlaceholderData)&&t.placeholderData===(null==m?void 0:m.placeholderData))e=_.data,E=!0;else{var k;e="function"==typeof t.placeholderData?t.placeholderData(null==(k=(0,P._)(this,c))?void 0:k.state.data,(0,P._)(this,c)):t.placeholderData}void 0!==e&&(T="success",d=(0,x.replaceData)(null==_?void 0:_.data,e,t),g=!0)}if(t.select&&void 0!==d&&!E)if(_&&d===(null==f?void 0:f.data)&&t.select===(0,P._)(this,u))d=(0,P._)(this,h);else try{(0,O._)(this,u,t.select),d=t.select(d),d=(0,x.replaceData)(null==_?void 0:_.data,d,t),(0,O._)(this,h,d),(0,O._)(this,o,null)}catch(e){(0,O._)(this,o,e)}(0,P._)(this,o)&&(R=(0,P._)(this,o),d=(0,P._)(this,h),S=Date.now(),T="error");let C="fetching"===y.fetchStatus,I="pending"===T,M="error"===T,W=I&&C,A=void 0!==d,D={status:T,fetchStatus:y.fetchStatus,isPending:I,isSuccess:"success"===T,isError:M,isInitialLoading:W,isLoading:W,data:d,dataUpdatedAt:y.dataUpdatedAt,error:R,errorUpdatedAt:S,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>w.dataUpdateCount||y.errorUpdateCount>w.errorUpdateCount,isFetching:C,isRefetching:C&&!I,isLoadingError:M&&!A,isPaused:"paused"===y.fetchStatus,isPlaceholderData:g,isRefetchError:M&&A,isStale:J(e,t),refetch:this.refetch,promise:(0,P._)(this,n),isEnabled:!1!==(0,x.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===D.status?e.reject(D.error):void 0!==D.data&&e.resolve(D.data)},i=()=>{t((0,O._)(this,n,D.promise=(0,U.pendingThenable)()))},s=(0,P._)(this,n);switch(s.status){case"pending":e.queryHash===p.queryHash&&t(s);break;case"fulfilled":("error"===D.status||D.data!==s.value)&&i();break;case"rejected":("error"!==D.status||D.error!==s.reason)&&i()}}return D}updateResult(){let e=(0,P._)(this,r),t=this.createResult((0,P._)(this,i),this.options);if((0,O._)(this,a,(0,P._)(this,i).state),(0,O._)(this,l,this.options),void 0!==(0,P._)(this,a).data&&(0,O._)(this,c,(0,P._)(this,i)),(0,x.shallowEqualObjects)(t,e))return;(0,O._)(this,r,t);let s=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,i="function"==typeof t?t():t;if("all"===i||!i&&!(0,P._)(this,_).size)return!0;let s=new Set(null!=i?i:(0,P._)(this,_));return this.options.throwOnError&&s.add("error"),Object.keys((0,P._)(this,r)).some(t=>(0,P._)(this,r)[t]!==e[t]&&s.has(t))};(0,k._)(this,T,V).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&(0,k._)(this,y,B).call(this)}constructor(e,P){super(),(0,C._)(this,f),(0,C._)(this,m),(0,C._)(this,w),(0,C._)(this,b),(0,C._)(this,y),(0,C._)(this,g),(0,C._)(this,R),(0,C._)(this,S),(0,C._)(this,T),(0,E._)(this,t,{writable:!0,value:void 0}),(0,E._)(this,i,{writable:!0,value:void 0}),(0,E._)(this,s,{writable:!0,value:void 0}),(0,E._)(this,r,{writable:!0,value:void 0}),(0,E._)(this,a,{writable:!0,value:void 0}),(0,E._)(this,l,{writable:!0,value:void 0}),(0,E._)(this,n,{writable:!0,value:void 0}),(0,E._)(this,o,{writable:!0,value:void 0}),(0,E._)(this,u,{writable:!0,value:void 0}),(0,E._)(this,h,{writable:!0,value:void 0}),(0,E._)(this,c,{writable:!0,value:void 0}),(0,E._)(this,d,{writable:!0,value:void 0}),(0,E._)(this,p,{writable:!0,value:void 0}),(0,E._)(this,v,{writable:!0,value:void 0}),(0,E._)(this,_,{writable:!0,value:new Set}),this.options=P,(0,O._)(this,t,e),(0,O._)(this,o,null),(0,O._)(this,n,(0,U.pendingThenable)()),this.bindMethods(),this.setOptions(P)}});function Q(e,t){return!1!==(0,x.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&j(e,t,t.refetchOnMount)}function j(e,t,i){if(!1!==(0,x.resolveEnabled)(t.enabled,e)&&"static"!==(0,x.resolveStaleTime)(t.staleTime,e)){let s="function"==typeof i?i(e):i;return"always"===s||!1!==s&&J(e,t)}return!1}function q(e,t,i,s){return(e!==t||!1===(0,x.resolveEnabled)(s.enabled,e))&&(!i.suspense||"error"!==e.state.status)&&J(e,i)}function J(e,t){return!1!==(0,x.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,x.resolveStaleTime)(t.staleTime,e))}function F(e){(0,k._)(this,S,z).call(this);let t=(0,P._)(this,i).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(x.noop)),t}function Y(){(0,k._)(this,g,N).call(this);let e=(0,x.resolveStaleTime)(this.options.staleTime,(0,P._)(this,i));if(x.isServer||(0,P._)(this,r).isStale||!(0,x.isValidTimeout)(e))return;let t=(0,x.timeUntilStale)((0,P._)(this,r).dataUpdatedAt,e);(0,O._)(this,d,A.timeoutManager.setTimeout(()=>{(0,P._)(this,r).isStale||this.updateResult()},t+1))}function G(){var e;return null!=(e="function"==typeof this.options.refetchInterval?this.options.refetchInterval((0,P._)(this,i)):this.options.refetchInterval)&&e}function H(e){(0,k._)(this,R,K).call(this),(0,O._)(this,v,e),!x.isServer&&!1!==(0,x.resolveEnabled)(this.options.enabled,(0,P._)(this,i))&&(0,x.isValidTimeout)((0,P._)(this,v))&&0!==(0,P._)(this,v)&&(0,O._)(this,p,A.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||I.focusManager.isFocused())&&(0,k._)(this,f,F).call(this)},(0,P._)(this,v)))}function B(){(0,k._)(this,m,Y).call(this),(0,k._)(this,b,H).call(this,(0,k._)(this,w,G).call(this))}function N(){(0,P._)(this,d)&&(A.timeoutManager.clearTimeout((0,P._)(this,d)),(0,O._)(this,d,void 0))}function K(){(0,P._)(this,p)&&(A.timeoutManager.clearInterval((0,P._)(this,p)),(0,O._)(this,p,void 0))}function z(){let e=(0,P._)(this,t).getQueryCache().build((0,P._)(this,t),this.options);if(e===(0,P._)(this,i))return;let r=(0,P._)(this,i);(0,O._)(this,i,e),(0,O._)(this,s,e.state),this.hasListeners()&&(null==r||r.removeObserver(this),e.addObserver(this))}function V(e){M.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e((0,P._)(this,r))}),(0,P._)(this,t).getQueryCache().notify({query:(0,P._)(this,i),type:"observerResultsUpdated"})})}e.i(47167);var X=e.i(71645),Z=e.i(12598);e.i(43476);var $=X.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),ee=X.createContext(!1);ee.Provider;var et=(e,t,i)=>t.fetchOptimistic(e).catch(()=>{i.clearReset()});function ei(e,t){return function(e,t,i){var s,r,a,l,n;let o=X.useContext(ee),u=X.useContext($),h=(0,Z.useQueryClient)(i),c=h.defaultQueryOptions(e);if(null==(r=h.getDefaultOptions().queries)||null==(s=r._experimental_beforeQuery)||s.call(r,c),c._optimisticResults=o?"isRestoring":"optimistic",c.suspense){let e=e=>"static"===e?e:Math.max(null!=e?e:1e3,1e3),t=c.staleTime;c.staleTime="function"==typeof t?function(){for(var i=arguments.length,s=Array(i),r=0;r<i;r++)s[r]=arguments[r];return e(t(...s))}:e(t),"number"==typeof c.gcTime&&(c.gcTime=Math.max(c.gcTime,1e3))}(c.suspense||c.throwOnError||c.experimental_prefetchInRender)&&!u.isReset()&&(c.retryOnMount=!1),X.useEffect(()=>{u.clearReset()},[u]);let d=!h.getQueryCache().get(c.queryHash),[p]=X.useState(()=>new t(h,c)),v=p.getOptimisticResult(c),_=!o&&!1!==e.subscribed;if(X.useSyncExternalStore(X.useCallback(e=>{let t=_?p.subscribe(M.notifyManager.batchCalls(e)):x.noop;return p.updateResult(),t},[p,_]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),X.useEffect(()=>{p.setOptions(c)},[c,p]),(null==c?void 0:c.suspense)&&v.isPending)throw et(c,p,u);if((e=>{let{result:t,errorResetBoundary:i,throwOnError:s,query:r,suspense:a}=e;return t.isError&&!i.isReset()&&!t.isFetching&&r&&(a&&void 0===t.data||(0,x.shouldThrowError)(s,[t.error,r]))})({result:v,errorResetBoundary:u,throwOnError:c.throwOnError,query:h.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw v.error;if(null==(l=h.getDefaultOptions().queries)||null==(a=l._experimental_afterQuery)||a.call(l,c,v),c.experimental_prefetchInRender&&!x.isServer&&v.isLoading&&v.isFetching&&!o){let e=d?et(c,p,u):null==(n=h.getQueryCache().get(c.queryHash))?void 0:n.promise;null==e||e.catch(x.noop).finally(()=>{p.updateResult()})}return c.notifyOnChangeProps?v:p.trackResult(v)}(e,D,t)}e.s(["getQuoteData",()=>ed,"itadSearchByTitle",()=>eo],17010);let es="https://api.isthereanydeal.com",er="c0976eafdab986bfcb33938af615368ae9eefa4f";console.log("[ITAD Client] API_KEY status:","set");let ea=[61,16,35,37,48,6,36];async function el(e){return new Promise(t=>setTimeout(t,e))}async function en(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{retries:i=2,retryDelayMs:s=600,label:r="itad",...a}=t,l=new AbortController,n=setTimeout(()=>l.abort(),2e4),o=new URL("string"==typeof e?e:e.toString());!o.searchParams.has("key")&&er&&o.searchParams.set("key",er),e=o;try{let t=await fetch(e,{...a,signal:l.signal});if(t.ok)return t;if((429===t.status||t.status>=500)&&i>0)return console.warn("[ITAD ".concat(r,"] ").concat(t.status," ").concat(t.statusText," -> retrying... (").concat(i," left)")),await el(s),en(e,{...a,retries:i-1,retryDelayMs:2*s,label:r});let n=await t.text().catch(()=>"");throw Error("HTTP ".concat(t.status,": ").concat(t.statusText," ").concat(n?"| body=".concat(n.slice(0,256)):""))}catch(t){if(i>0)return console.warn("[ITAD ".concat(r,"] error: ").concat(t instanceof Error?t.message:String(t)," -> retrying... (").concat(i," left)")),await el(s),en(e,{...a,retries:i-1,retryDelayMs:2*s,label:r});throw t}finally{clearTimeout(n)}}async function eo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,i=new URL("".concat(es,"/games/search/v1"));i.searchParams.set("title",e),i.searchParams.set("results",String(t));let s=await en(i,{method:"GET",label:"search"}),r=await s.json();return Array.isArray(r)?r:[]}async function eu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"JP",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ea,s=new URL("".concat(es,"/games/prices/v3"));return s.searchParams.set("country",t),s.searchParams.set("shops",i.join(",")),s.searchParams.set("deals","false"),s.searchParams.set("ids",e.join(",")),(await en(s,{method:"GET",label:"prices-v3"})).json()}async function eh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"JP",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ea,s=new URL("".concat(es,"/games/storelow/v2"));return s.searchParams.set("country",t),s.searchParams.set("shops",i.join(",")),s.searchParams.set("ids",e.join(",")),(await en(s,{method:"GET",label:"storelow-v2"})).json()}async function ec(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"JP",i=new URL("".concat(es,"/games/overview/v2"));return i.searchParams.set("country",t),i.searchParams.set("ids",e.join(",")),(await en(i,{method:"GET",label:"overview-v2"})).json()}async function ed(e){try{var t,i,s,r,a,l,n,o,u;let[h,c,d,p]=await Promise.all([eu([e],"JP",ea),eh([e],"JP",ea),ec([e],"JP"),ec([e],"JP")]),v=new Map,_=null==h?void 0:h[0],f=(null==p?void 0:p.bundles)||[],m=(null==d||null==(t=d[0])?void 0:t.title)||(null==_?void 0:_.title)||e,w=(e,t)=>{let i=e.get(t.id);if(i)return i;let s={storeId:t.id,storeName:t.name};return e.set(t.id,s),s};(null!=(r=null==_?void 0:_.deals)?r:[]).forEach(e=>{var t,i,s,r,a,l,n,o,u,h,c,d,p,_;let f=w(v,e.shop),m=null!=(n=null!=(l=null==(t=e.price)?void 0:t.amountInt)?l:null==(i=e.price)?void 0:i.amount)?n:null,b=null!=(u=null!=(o=null==(s=e.regular)?void 0:s.amountInt)?o:null==(r=e.regular)?void 0:r.amount)?u:null,y=null!=(h=e.cut)?h:0,g=!!(y>0&&b&&m&&m<b),R=null;if(0===m)switch(null==(c=e.shop)?void 0:c.id){case 48:R={service:"Xbox Game Pass",type:"subscription"};break;case 16:R={service:"Epic Games Store",type:"free"}}f.now={price:m,regularPrice:b,cut:y,isOnSale:g,subscriptionInfo:R,currency:null!=(d=null==(a=e.price)?void 0:a.currency)?d:"JPY",url:null!=(p=e.url)?p:"",ts:null!=(_=e.timestamp)?_:new Date().toISOString()}});let b=null==c?void 0:c[0];(null!=(a=null==b?void 0:b.lows)?a:[]).forEach(e=>{var t,i,s,r,a,l;w(v,e.shop).storeLowAll={price:"number"==typeof e.price?e.price:null!=(r=null!=(s=null==(t=e.price)?void 0:t.amountInt)?s:null==(i=e.price)?void 0:i.amount)?r:null,date:null!=(l=null!=(a=e.added)?a:e.recorded)?l:""}});let y=null==d?void 0:d[0],g=null==y||null==(i=y.lowest)?void 0:i.price,R="number"==typeof g?g:null!=(n=null!=(l=null==g?void 0:g.amountInt)?l:null==g?void 0:g.amount)?n:null,S=(null==y?void 0:y.lowest)?{allTimeLow:{price:R,store:null!=(o=null==(s=y.lowest.shop)?void 0:s.name)?o:"",date:null!=(u=y.lowest.added)?u:""}}:{},T=Array.from(v.values()).sort((e,t)=>e.storeId-t.storeId);return{data:{[e]:{title:m,list:T.filter(e=>{var t,i;return(null==(t=e.now)?void 0:t.price)!==void 0&&(null==(i=e.now)?void 0:i.price)!==null}).map(e=>{var t,i,s,r,a,l,n;return{id:e.storeId.toString(),name:e.storeName,priceJPY:e.now.price,regularPriceJPY:"number"==typeof(null==(t=e.now)?void 0:t.regularPrice)?e.now.regularPrice:null,discountPercent:(null==(i=e.now)?void 0:i.cut)||0,isOnSale:(null==(s=e.now)?void 0:s.isOnSale)||!1,url:(null==(r=e.now)?void 0:r.url)||"",availability:(null==(a=e.now)?void 0:a.price)?"available":"unavailable",timestamp:(null==(l=e.now)?void 0:l.ts)||new Date().toISOString(),subscriptionInfo:(null==(n=e.now)?void 0:n.subscriptionInfo)||null}}),bundleInfo:(null==f?void 0:f.map(e=>{var t,i,s;return{name:e.title||"",url:e.url||"",priceJPY:(null==(s=e.tiers)||null==(i=s[0])||null==(t=i.price)?void 0:t.amountInt)||0}}))||null,storeLowAll:T.filter(e=>e.storeLowAll&&"number"==typeof e.storeLowAll.price).map(e=>{var t;return{id:e.storeId.toString(),name:e.storeName,priceJPY:e.storeLowAll.price,url:"",availability:"historical",timestamp:(null==(t=e.storeLowAll)?void 0:t.date)||""}}),summary:{allTimeLow:S.allTimeLow?{priceJPY:"number"==typeof S.allTimeLow.price?S.allTimeLow.price:0,shopName:S.allTimeLow.store||"",timestamp:S.allTimeLow.date||""}:null}}}}}catch(e){throw console.error("Quote data fetch error:",e),e}}}]);